<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Глава 11: Hilt DI | Android E-Commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        pre { background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
        .keyword { color: #569cd6; }
        .function { color: #dcdcaa; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; }
        .annotation { color: #4ec9b0; }
    </style>
</head>
<body class="bg-white dark:bg-zinc-900">
    <div class="max-w-4xl mx-auto px-6 py-12">
        <a href="../index.html" class="text-green-500 hover:underline mb-4 inline-block">&larr; Назад</a>
        <h1 class="text-4xl font-bold text-zinc-900 dark:text-white mb-6">Глава 11: Hilt DI</h1>
        <div class="prose dark:prose-invert max-w-none">
            <h2 class="text-2xl font-bold mt-8 mb-4">Настройка Hilt</h2>
            <pre><code><span class="annotation">@HiltAndroidApp</span>
<span class="keyword">class</span> EcommerceApp : Application()

<span class="annotation">@AndroidEntryPoint</span>
<span class="keyword">class</span> MainActivity : ComponentActivity()

<span class="annotation">@HiltViewModel</span>
<span class="keyword">class</span> HomeViewModel <span class="annotation">@Inject</span> <span class="keyword">constructor</span>(
    <span class="keyword">private val</span> useCase: GetProductsUseCase
) : ViewModel()</code></pre>

            <h2 class="text-2xl font-bold mt-8 mb-4">Modules</h2>
            <pre><code><span class="annotation">@Module</span>
<span class="annotation">@InstallIn</span>(SingletonComponent::<span class="keyword">class</span>)
<span class="keyword">object</span> NetworkModule {
    <span class="annotation">@Provides</span>
    <span class="annotation">@Singleton</span>
    <span class="keyword">fun</span> <span class="function">provideRetrofit</span>(): Retrofit = Retrofit.Builder()
        .baseUrl(<span class="string">"https://dummyjson.com/"</span>)
        .addConverterFactory(MoshiConverterFactory.create())
        .build()
}

<span class="annotation">@Module</span>
<span class="annotation">@InstallIn</span>(SingletonComponent::<span class="keyword">class</span>)
<span class="keyword">abstract class</span> RepositoryModule {
    <span class="annotation">@Binds</span>
    <span class="keyword">abstract fun</span> <span class="function">bindProductRepository</span>(
        impl: ProductRepositoryImpl
    ): ProductRepository
}</code></pre>

            <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 mt-8">
                <h3 class="font-semibold text-green-900 dark:text-green-100 mb-3">Ключевые аннотации</h3>
                <ul class="text-green-800 dark:text-green-200 space-y-2">
                    <li>• <strong>@Provides</strong> — для внешних классов (Retrofit, Room)</li>
                    <li>• <strong>@Binds</strong> — для связывания интерфейсов с реализациями</li>
                    <li>• <strong>@Singleton</strong> — один экземпляр на всё приложение</li>
                </ul>
            </div>
        </div>
        <div class="flex justify-between items-center mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-800">
            <a href="10-navigation.html" class="text-green-500 hover:underline">&larr; Навигация</a>
            <a href="../index.html" class="text-green-500 hover:underline">Оглавление</a>
            <a href="12-testing.html" class="text-green-500 hover:underline">Тестирование &rarr;</a>
        </div>
    </div>
</body>
</html>
