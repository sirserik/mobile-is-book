<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Глава 1: Основы Compose | Android E-Commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        pre { background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
        .keyword { color: #569cd6; }
        .function { color: #dcdcaa; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; }
        .annotation { color: #4ec9b0; }
        .number { color: #b5cea8; }
    </style>
</head>
<body class="bg-white dark:bg-zinc-900">
    <div class="max-w-4xl mx-auto px-6 py-12">
        <a href="../index.html" class="text-green-500 hover:underline mb-4 inline-block">&larr; Назад к оглавлению</a>

        <h1 class="text-4xl font-bold text-zinc-900 dark:text-white mb-6">Глава 1: Основы Jetpack Compose</h1>

        <div class="prose dark:prose-invert max-w-none">

            <!-- Что такое Compose -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Что такое Jetpack Compose?</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Jetpack Compose — это современный декларативный UI-фреймворк для Android.
                Вместо XML-разметки вы описываете интерфейс с помощью Kotlin-функций.
            </p>

            <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 mb-8">
                <h3 class="font-semibold text-green-900 dark:text-green-100 mb-3">Compose vs XML</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm font-medium text-green-800 dark:text-green-200 mb-2">XML (старый подход)</p>
                        <ul class="text-sm text-green-700 dark:text-green-300 space-y-1">
                            <li>• Императивный подход</li>
                            <li>• Разметка в XML файлах</li>
                            <li>• findViewById / ViewBinding</li>
                            <li>• Ручное обновление UI</li>
                        </ul>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-green-800 dark:text-green-200 mb-2">Compose (новый подход)</p>
                        <ul class="text-sm text-green-700 dark:text-green-300 space-y-1">
                            <li>• Декларативный подход</li>
                            <li>• UI на Kotlin</li>
                            <li>• Composable функции</li>
                            <li>• Автоматическая рекомпозиция</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Composable функции -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Composable функции</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Composable — это функция с аннотацией <code class="bg-zinc-100 dark:bg-zinc-800 px-2 py-1 rounded">@Composable</code>,
                которая описывает часть UI.
            </p>

            <pre class="mb-6"><code><span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">Greeting</span>(name: String) {
    <span class="function">Text</span>(text = <span class="string">"Привет, $name!"</span>)
}

<span class="comment">// Использование</span>
<span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">MyScreen</span>() {
    <span class="function">Greeting</span>(name = <span class="string">"Android"</span>)
}</code></pre>

            <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4 mb-6">
                <p class="text-yellow-800 dark:text-yellow-200 text-sm">
                    <strong>Правила:</strong> Composable функции можно вызывать только из других Composable функций.
                    Имена Composable функций начинаются с заглавной буквы.
                </p>
            </div>

            <!-- Базовые компоненты -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Базовые компоненты</h2>

            <h3 class="text-xl font-semibold mt-6 mb-3">Text</h3>
            <pre class="mb-6"><code><span class="function">Text</span>(
    text = <span class="string">"Заголовок"</span>,
    fontSize = <span class="number">24</span>.sp,
    fontWeight = FontWeight.Bold,
    color = Color.Black
)</code></pre>

            <h3 class="text-xl font-semibold mt-6 mb-3">Button</h3>
            <pre class="mb-6"><code><span class="function">Button</span>(
    onClick = { <span class="comment">/* действие */</span> },
    colors = ButtonDefaults.buttonColors(
        containerColor = Color.Green
    )
) {
    <span class="function">Text</span>(<span class="string">"Нажми меня"</span>)
}</code></pre>

            <h3 class="text-xl font-semibold mt-6 mb-3">Image</h3>
            <pre class="mb-6"><code><span class="function">Image</span>(
    painter = painterResource(id = R.drawable.logo),
    contentDescription = <span class="string">"Логотип"</span>,
    modifier = Modifier.size(<span class="number">100</span>.dp)
)

<span class="comment">// Загрузка из сети с Coil</span>
<span class="function">AsyncImage</span>(
    model = <span class="string">"https://example.com/image.jpg"</span>,
    contentDescription = <span class="keyword">null</span>
)</code></pre>

            <h3 class="text-xl font-semibold mt-6 mb-3">TextField</h3>
            <pre class="mb-6"><code><span class="keyword">var</span> text <span class="keyword">by</span> remember { mutableStateOf(<span class="string">""</span>) }

<span class="function">TextField</span>(
    value = text,
    onValueChange = { text = it },
    label = { <span class="function">Text</span>(<span class="string">"Введите текст"</span>) },
    placeholder = { <span class="function">Text</span>(<span class="string">"Подсказка"</span>) }
)</code></pre>

            <!-- Layouts -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Layouts: Column, Row, Box</h2>

            <h3 class="text-xl font-semibold mt-6 mb-3">Column — вертикальный список</h3>
            <pre class="mb-6"><code><span class="function">Column</span>(
    modifier = Modifier.padding(<span class="number">16</span>.dp),
    verticalArrangement = Arrangement.spacedBy(<span class="number">8</span>.dp)
) {
    <span class="function">Text</span>(<span class="string">"Первый"</span>)
    <span class="function">Text</span>(<span class="string">"Второй"</span>)
    <span class="function">Text</span>(<span class="string">"Третий"</span>)
}</code></pre>

            <h3 class="text-xl font-semibold mt-6 mb-3">Row — горизонтальный список</h3>
            <pre class="mb-6"><code><span class="function">Row</span>(
    modifier = Modifier.fillMaxWidth(),
    horizontalArrangement = Arrangement.SpaceBetween,
    verticalAlignment = Alignment.CenterVertically
) {
    <span class="function">Text</span>(<span class="string">"Слева"</span>)
    <span class="function">Text</span>(<span class="string">"Справа"</span>)
}</code></pre>

            <h3 class="text-xl font-semibold mt-6 mb-3">Box — наложение элементов</h3>
            <pre class="mb-6"><code><span class="function">Box</span>(
    modifier = Modifier.size(<span class="number">200</span>.dp),
    contentAlignment = Alignment.Center
) {
    <span class="function">Image</span>(painter = painterResource(R.drawable.bg), <span class="string">"bg"</span>)
    <span class="function">Text</span>(<span class="string">"Поверх изображения"</span>, color = Color.White)
}</code></pre>

            <!-- Modifier -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Modifier — настройка компонентов</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Modifier позволяет изменять размер, отступы, фон, клики и многое другое.
            </p>

            <pre class="mb-6"><code><span class="function">Text</span>(
    text = <span class="string">"Стилизованный текст"</span>,
    modifier = Modifier
        .fillMaxWidth()          <span class="comment">// На всю ширину</span>
        .padding(<span class="number">16</span>.dp)           <span class="comment">// Отступы</span>
        .background(Color.Gray)  <span class="comment">// Фон</span>
        .clickable { }           <span class="comment">// Обработка клика</span>
)</code></pre>

            <div class="bg-zinc-100 dark:bg-zinc-800 rounded-xl p-6 mb-6">
                <h3 class="font-semibold mb-3">Популярные Modifiers</h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div>
                        <code class="text-green-600">fillMaxWidth()</code> — на всю ширину<br>
                        <code class="text-green-600">fillMaxHeight()</code> — на всю высоту<br>
                        <code class="text-green-600">fillMaxSize()</code> — на весь размер<br>
                        <code class="text-green-600">size(100.dp)</code> — фиксированный размер
                    </div>
                    <div>
                        <code class="text-green-600">padding(16.dp)</code> — отступы<br>
                        <code class="text-green-600">background(Color)</code> — фон<br>
                        <code class="text-green-600">clip(RoundedCornerShape)</code> — скругление<br>
                        <code class="text-green-600">border(1.dp, Color)</code> — рамка
                    </div>
                </div>
            </div>

            <!-- State -->
            <h2 class="text-2xl font-bold mt-8 mb-4">State — управление состоянием</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                В Compose UI автоматически обновляется при изменении состояния.
                Для этого используется <code>remember</code> и <code>mutableStateOf</code>.
            </p>

            <pre class="mb-6"><code><span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">Counter</span>() {
    <span class="comment">// remember сохраняет значение между рекомпозициями</span>
    <span class="keyword">var</span> count <span class="keyword">by</span> remember { mutableStateOf(<span class="number">0</span>) }

    <span class="function">Column</span>(horizontalAlignment = Alignment.CenterHorizontally) {
        <span class="function">Text</span>(
            text = <span class="string">"Счётчик: $count"</span>,
            fontSize = <span class="number">24</span>.sp
        )

        <span class="function">Button</span>(onClick = { count++ }) {
            <span class="function">Text</span>(<span class="string">"Увеличить"</span>)
        }
    }
}</code></pre>

            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6">
                <p class="text-blue-800 dark:text-blue-200 text-sm">
                    <strong>Как это работает:</strong> При изменении <code>count</code> Compose автоматически
                    перерисовывает только те части UI, которые зависят от этого значения. Это называется рекомпозицией.
                </p>
            </div>

            <!-- rememberSaveable -->
            <h3 class="text-xl font-semibold mt-6 mb-3">rememberSaveable — сохранение при повороте</h3>
            <pre class="mb-6"><code><span class="comment">// remember теряется при повороте экрана</span>
<span class="keyword">var</span> count <span class="keyword">by</span> remember { mutableStateOf(<span class="number">0</span>) }

<span class="comment">// rememberSaveable сохраняется при повороте</span>
<span class="keyword">var</span> count <span class="keyword">by</span> rememberSaveable { mutableStateOf(<span class="number">0</span>) }</code></pre>

            <!-- Списки -->
            <h2 class="text-2xl font-bold mt-8 mb-4">LazyColumn и LazyRow — списки</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Для больших списков используйте LazyColumn (аналог RecyclerView) — он рендерит только видимые элементы.
            </p>

            <pre class="mb-6"><code><span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">ProductList</span>(products: List&lt;Product&gt;) {
    <span class="function">LazyColumn</span>(
        contentPadding = PaddingValues(<span class="number">16</span>.dp),
        verticalArrangement = Arrangement.spacedBy(<span class="number">8</span>.dp)
    ) {
        items(products) { product -&gt;
            <span class="function">ProductCard</span>(product)
        }
    }
}

<span class="comment">// С ключом для оптимизации</span>
items(
    items = products,
    key = { it.id }
) { product -&gt;
    <span class="function">ProductCard</span>(product)
}</code></pre>

            <h3 class="text-xl font-semibold mt-6 mb-3">LazyVerticalGrid — сетка</h3>
            <pre class="mb-6"><code><span class="function">LazyVerticalGrid</span>(
    columns = GridCells.Fixed(<span class="number">2</span>),  <span class="comment">// 2 колонки</span>
    contentPadding = PaddingValues(<span class="number">16</span>.dp),
    horizontalArrangement = Arrangement.spacedBy(<span class="number">8</span>.dp),
    verticalArrangement = Arrangement.spacedBy(<span class="number">8</span>.dp)
) {
    items(products) { product -&gt;
        <span class="function">ProductCard</span>(product)
    }
}</code></pre>

            <!-- Scaffold -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Scaffold — структура экрана</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Scaffold предоставляет стандартную структуру Material Design экрана.
            </p>

            <pre class="mb-6"><code><span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">MainScreen</span>() {
    <span class="function">Scaffold</span>(
        topBar = {
            <span class="function">TopAppBar</span>(
                title = { <span class="function">Text</span>(<span class="string">"E-Commerce"</span>) },
                actions = {
                    <span class="function">IconButton</span>(onClick = { }) {
                        <span class="function">Icon</span>(Icons.Default.Search, <span class="string">"Поиск"</span>)
                    }
                }
            )
        },
        bottomBar = {
            <span class="function">NavigationBar</span> {
                <span class="function">NavigationBarItem</span>(
                    selected = <span class="keyword">true</span>,
                    onClick = { },
                    icon = { <span class="function">Icon</span>(Icons.Default.Home, <span class="keyword">null</span>) },
                    label = { <span class="function">Text</span>(<span class="string">"Главная"</span>) }
                )
            }
        },
        floatingActionButton = {
            <span class="function">FloatingActionButton</span>(onClick = { }) {
                <span class="function">Icon</span>(Icons.Default.Add, <span class="string">"Добавить"</span>)
            }
        }
    ) { paddingValues -&gt;
        <span class="comment">// Основной контент</span>
        <span class="function">ProductList</span>(
            modifier = Modifier.padding(paddingValues)
        )
    }
}</code></pre>

            <!-- Card -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Карточка товара</h2>
            <pre class="mb-6"><code><span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">ProductCard</span>(product: Product, onClick: () -&gt; Unit) {
    <span class="function">Card</span>(
        modifier = Modifier
            .fillMaxWidth()
            .clickable { onClick() },
        elevation = CardDefaults.cardElevation(defaultElevation = <span class="number">4</span>.dp),
        shape = RoundedCornerShape(<span class="number">12</span>.dp)
    ) {
        <span class="function">Column</span> {
            <span class="function">AsyncImage</span>(
                model = product.thumbnail,
                contentDescription = product.title,
                modifier = Modifier
                    .fillMaxWidth()
                    .height(<span class="number">150</span>.dp),
                contentScale = ContentScale.Crop
            )

            <span class="function">Column</span>(modifier = Modifier.padding(<span class="number">12</span>.dp)) {
                <span class="function">Text</span>(
                    text = product.title,
                    fontWeight = FontWeight.Bold,
                    maxLines = <span class="number">1</span>,
                    overflow = TextOverflow.Ellipsis
                )

                <span class="function">Spacer</span>(modifier = Modifier.height(<span class="number">4</span>.dp))

                <span class="function">Text</span>(
                    text = <span class="string">"$${product.price}"</span>,
                    color = MaterialTheme.colorScheme.primary,
                    fontWeight = FontWeight.SemiBold
                )
            }
        }
    }
}</code></pre>

            <!-- Preview -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Preview — предпросмотр</h2>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Используйте <code>@Preview</code> для просмотра UI прямо в Android Studio.
            </p>

            <pre class="mb-6"><code><span class="annotation">@Preview</span>(showBackground = <span class="keyword">true</span>)
<span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">ProductCardPreview</span>() {
    <span class="function">ProductCard</span>(
        product = Product(
            id = <span class="number">1</span>,
            title = <span class="string">"iPhone 15"</span>,
            price = <span class="number">999.0</span>,
            thumbnail = <span class="string">""</span>
        ),
        onClick = { }
    )
}

<span class="comment">// Несколько превью</span>
<span class="annotation">@Preview</span>(name = <span class="string">"Light"</span>)
<span class="annotation">@Preview</span>(name = <span class="string">"Dark"</span>, uiMode = UI_MODE_NIGHT_YES)
<span class="annotation">@Composable</span>
<span class="keyword">fun</span> <span class="function">ThemePreview</span>() { ... }</code></pre>

            <!-- Сравнение с React -->
            <h2 class="text-2xl font-bold mt-8 mb-4">Сравнение с React</h2>
            <div class="overflow-x-auto mb-8">
                <table class="w-full text-sm">
                    <thead class="bg-zinc-100 dark:bg-zinc-800">
                        <tr>
                            <th class="px-4 py-2 text-left">React</th>
                            <th class="px-4 py-2 text-left">Compose</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-zinc-200 dark:divide-zinc-700">
                        <tr>
                            <td class="px-4 py-2"><code>useState</code></td>
                            <td class="px-4 py-2"><code>remember { mutableStateOf() }</code></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2"><code>useEffect</code></td>
                            <td class="px-4 py-2"><code>LaunchedEffect</code></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2"><code>&lt;div&gt;</code></td>
                            <td class="px-4 py-2"><code>Box</code></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2"><code>flex-direction: column</code></td>
                            <td class="px-4 py-2"><code>Column</code></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2"><code>flex-direction: row</code></td>
                            <td class="px-4 py-2"><code>Row</code></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2"><code>map()</code> для списков</td>
                            <td class="px-4 py-2"><code>LazyColumn { items() }</code></td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2"><code>props</code></td>
                            <td class="px-4 py-2">Параметры функции</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Итоги -->
            <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 mb-8">
                <h3 class="font-semibold text-green-900 dark:text-green-100 mb-3">Ключевые концепции</h3>
                <ul class="text-green-800 dark:text-green-200 space-y-2">
                    <li>• <strong>@Composable</strong> — аннотация для UI-функций</li>
                    <li>• <strong>Column/Row/Box</strong> — основные layouts</li>
                    <li>• <strong>Modifier</strong> — настройка внешнего вида и поведения</li>
                    <li>• <strong>remember + mutableStateOf</strong> — управление состоянием</li>
                    <li>• <strong>LazyColumn/LazyRow</strong> — эффективные списки</li>
                    <li>• <strong>Scaffold</strong> — структура экрана Material Design</li>
                </ul>
            </div>

        </div>

        <div class="flex justify-between items-center mt-12 pt-8 border-t border-zinc-200 dark:border-zinc-800">
            <a href="00a-kotlin-for-developers.html" class="text-green-500 hover:underline">&larr; Kotlin для разработчиков</a>
            <a href="../index.html" class="text-green-500 hover:underline">Оглавление</a>
            <a href="02-mvvm.html" class="text-green-500 hover:underline">MVVM + Clean Architecture &rarr;</a>
        </div>
    </div>
</body>
</html>
