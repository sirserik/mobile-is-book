<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–∞ 10: –ù–∞–≤–∏–≥–∞—Ü–∏—è | SwiftUI E-Commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'media',
            theme: { extend: { colors: { primary: '#007AFF' } } }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/swift.min.js"></script>
    <style>
        ::-webkit-scrollbar { width: 6px; }
        pre code { font-size: 14px; line-height: 1.6; }
    </style>
</head>
<body class="bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100">
    <div class="min-h-screen">
        <header class="sticky top-0 z-40 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800">
            <div class="max-w-4xl mx-auto px-6 py-4 flex items-center justify-between">
                <a href="../index.html" class="flex items-center gap-2 text-zinc-600 dark:text-zinc-400 hover:text-primary transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
                </a>
                <span class="text-sm text-zinc-500">–ì–ª–∞–≤–∞ 10</span>
            </div>
        </header>

        <main class="max-w-4xl mx-auto px-6 py-12">
            <article class="prose prose-zinc dark:prose-invert max-w-none">
                <span class="text-sm font-semibold text-primary uppercase tracking-wider">–ì–ª–∞–≤–∞ 10</span>
                <h1 class="text-4xl font-bold mt-2 mb-8">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h1>

                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-8">
                    <h3 class="text-lg font-semibold text-blue-800 dark:text-blue-300 mb-2">üéØ –¶–µ–ª—å –≥–ª–∞–≤—ã</h3>
                    <p class="text-blue-700 dark:text-blue-400">
                        –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å NavigationStack, TabView –∏ Router –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º.
                    </p>
                </div>

                <h2 class="text-2xl font-bold mt-12 mb-4">TabView</h2>
                <pre><code class="language-swift rounded-xl">// ContentView.swift
import SwiftUI

struct ContentView: View {
    @State private var selectedTab = 0
    @Environment(CartManager.self) private var cart

    var body: some View {
        TabView(selection: $selectedTab) {
            ProductListView()
                .tabItem {
                    Label("–¢–æ–≤–∞—Ä—ã", systemImage: "square.grid.2x2")
                }
                .tag(0)

            SearchView()
                .tabItem {
                    Label("–ü–æ–∏—Å–∫", systemImage: "magnifyingglass")
                }
                .tag(1)

            FavoritesView()
                .tabItem {
                    Label("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ", systemImage: "heart")
                }
                .tag(2)

            CartView()
                .tabItem {
                    Label("–ö–æ—Ä–∑–∏–Ω–∞", systemImage: "cart")
                }
                .badge(cart.totalItems > 0 ? "\(cart.totalItems)" : nil)
                .tag(3)
        }
    }
}</code></pre>

                <h2 class="text-2xl font-bold mt-12 mb-4">NavigationStack (iOS 16+)</h2>
                <pre><code class="language-swift rounded-xl">struct ProductListView: View {
    @State private var path = NavigationPath()

    var body: some View {
        NavigationStack(path: $path) {
            List(products) { product in
                NavigationLink(value: product) {
                    ProductRow(product: product)
                }
            }
            .navigationDestination(for: Product.self) { product in
                ProductDetailView(product: product)
            }
            .navigationDestination(for: Category.self) { category in
                CategoryView(category: category)
            }
        }
    }

    // –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
    func navigateToProduct(_ product: Product) {
        path.append(product)
    }

    func popToRoot() {
        path.removeLast(path.count)
    }
}</code></pre>

                <h2 class="text-2xl font-bold mt-12 mb-4">Router –ø–∞—Ç—Ç–µ—Ä–Ω</h2>
                <pre><code class="language-swift rounded-xl">// Core/Navigation/Router.swift
import SwiftUI
import Observation

enum Route: Hashable {
    case productDetail(Product)
    case category(String)
    case cart
    case checkout
    case orderSuccess(orderId: String)
}

@Observable
final class Router {
    var path = NavigationPath()

    func navigate(to route: Route) {
        path.append(route)
    }

    func pop() {
        guard !path.isEmpty else { return }
        path.removeLast()
    }

    func popToRoot() {
        path.removeLast(path.count)
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
struct ProductListView: View {
    @Environment(Router.self) private var router

    var body: some View {
        @Bindable var router = router

        NavigationStack(path: $router.path) {
            List(products) { product in
                Button {
                    router.navigate(to: .productDetail(product))
                } label: {
                    ProductRow(product: product)
                }
            }
            .navigationDestination(for: Route.self) { route in
                switch route {
                case .productDetail(let product):
                    ProductDetailView(product: product)
                case .category(let name):
                    CategoryView(categoryName: name)
                case .cart:
                    CartView()
                case .checkout:
                    CheckoutView()
                case .orderSuccess(let orderId):
                    OrderSuccessView(orderId: orderId)
                }
            }
        }
    }
}</code></pre>

                <h2 class="text-2xl font-bold mt-12 mb-4">Deep Linking</h2>
                <pre><code class="language-swift rounded-xl">// ShoppingApp.swift
@main
struct ShoppingApp: App {
    @State private var router = Router()

    var body: some Scene {
        WindowGroup {
            ContentView()
                .environment(router)
                .onOpenURL { url in
                    handleDeepLink(url)
                }
        }
    }

    private func handleDeepLink(_ url: URL) {
        // shopping://product/123
        guard let components = URLComponents(url: url, resolvingAgainstBaseURL: true),
              let host = components.host else {
            return
        }

        switch host {
        case "product":
            if let idString = components.path.split(separator: "/").first,
               let id = Int(idString) {
                // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç –∏ –ø–µ—Ä–µ–π—Ç–∏
                Task {
                    if let product = try? await ProductService().fetchProduct(id: id) {
                        router.navigate(to: .productDetail(product))
                    }
                }
            }
        case "cart":
            // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ tab –∫–æ—Ä–∑–∏–Ω—ã
            break
        default:
            break
        }
    }
}</code></pre>

                <h2 class="text-2xl font-bold mt-12 mb-4">Sheet & FullScreenCover</h2>
                <pre><code class="language-swift rounded-xl">struct ProductDetailView: View {
    @State private var showImageGallery = false
    @State private var showCheckout = false

    var body: some View {
        VStack {
            // Content
        }
        // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è
        .fullScreenCover(isPresented: $showImageGallery) {
            ImageGalleryView(images: product.images)
        }
        // Sheet –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
        .sheet(isPresented: $showCheckout) {
            CheckoutView()
                .presentationDetents([.medium, .large])
                .presentationDragIndicator(.visible)
        }
    }
}</code></pre>

                <h2 class="text-2xl font-bold mt-12 mb-4">üèãÔ∏è –ó–∞–¥–∞–Ω–∏—è</h2>
                <div class="bg-zinc-50 dark:bg-zinc-900 rounded-xl p-6 border border-zinc-200 dark:border-zinc-800">
                    <ol class="space-y-4 text-zinc-600 dark:text-zinc-400">
                        <li><strong>1.</strong> –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                        <li><strong>2.</strong> –î–æ–±–∞–≤—å—Ç–µ deep link –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (shopping://category/smartphones)</li>
                        <li><strong>3.</strong> –†–µ–∞–ª–∏–∑—É–π—Ç–µ custom transition –∞–Ω–∏–º–∞—Ü–∏—é –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏</li>
                    </ol>
                </div>

                <!-- Navigation -->
                <div class="flex justify-between items-center mt-16 pt-8 border-t border-zinc-200 dark:border-zinc-800">
                    <a href="09-cart.html" class="flex items-center gap-2 text-zinc-600 dark:text-zinc-400 hover:text-primary transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        –ì–ª–∞–≤–∞ 9: –ö–æ—Ä–∑–∏–Ω–∞
                    </a>
                    <a href="11-testing.html" class="flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-xl hover:bg-blue-600 transition-colors">
                        –ì–ª–∞–≤–∞ 11: –¢–µ—Å—Ç—ã
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </article>
        </main>
    </div>

    <script>hljs.highlightAll();</script>
</body>
</html>
