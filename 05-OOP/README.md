# –ì–ª–∞–≤–∞ 5: –û–û–ü ‚Äî –ö–ª–∞—Å—Å—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

## –í–≤–µ–¥–µ–Ω–∏–µ

–û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–û–û–ü) ‚Äî —ç—Ç–æ **—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞–¥–∏–≥–º–∞**, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –ø–æ—Å—Ç—Ä–æ–µ–Ω –≤–µ—Å—å UIKit –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å JavaScript, –≤—ã —É–∂–µ –∑–Ω–∞–∫–æ–º—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏. Swift –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥—É—é –∏ –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É –û–û–ü.

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã **–≥–ª—É–±–æ–∫–æ** –∏–∑—É—á–∏–º:
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã (struct) –∏ –∫–ª–∞—Å—Å—ã (class)
- –ö–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø–æ—á–µ–º—É –º—ã –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã iOS —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Web —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π

| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è | JavaScript | Swift |
|-----------|------------|-------|
| –û–±—ä–µ–∫—Ç | `{}` –∏–ª–∏ `class` | `class` –∏–ª–∏ `struct` |
| –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ | `extends` | `: ParentClass` |
| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | TypeScript `interface` | `protocol` |
| –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è | `#field` –∏–ª–∏ `_field` | `private var field` |
| –ì–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã | `get`/`set` | computed properties |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã | `static` | `static` –∏–ª–∏ `class` |

---

## 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä—ã (struct) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî —ç—Ç–æ **—Ç–∏–ø-–∑–Ω–∞—á–µ–Ω–∏–µ (value type)**, –∫–æ—Ç–æ—Ä—ã–π –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ö–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç–µ –µ—ë –¥—Ä—É–≥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, —Å–æ–∑–¥–∞—ë—Ç—Å—è **–∫–æ–ø–∏—è**.

```
–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏:
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç Word. –ö–æ–≥–¥–∞ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Ñ–∞–π–ª –¥—Ä—É–≥—É,
–æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –ö–û–ü–ò–Æ. –ï—Å–ª–∏ –æ–Ω –∏–∑–º–µ–Ω–∏—Ç —Å–≤–æ—é –∫–æ–ø–∏—é, –≤–∞—à –æ—Ä–∏–≥–∏–Ω–∞–ª
–æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º.
```

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```swift
// –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
struct Product {
    // –•—Ä–∞–Ω–∏–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (stored properties)
    let id: Int              // –ù–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    var name: String         // –ò–∑–º–µ–Ω—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    var price: Double        // –ò–∑–º–µ–Ω—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    var inStock: Bool = true // –°–≤–æ–π—Å—Ç–≤–æ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
}

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (memberwise initializer —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
let iphone = Product(id: 1, name: "iPhone 15", price: 999.0)

// –ò–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
let macbook = Product(id: 2, name: "MacBook Pro", price: 1999.0, inStock: false)

// –î–æ—Å—Ç—É–ø –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º
print(iphone.name)    // iPhone 15
print(iphone.price)   // 999.0
```

### –ü–æ—á–µ–º—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äî —ç—Ç–æ value type

```swift
// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
var product1 = Product(id: 1, name: "iPhone", price: 999.0)
var product2 = product1  // –°–æ–∑–¥–∞—ë—Ç—Å—è –ö–û–ü–ò–Ø

product2.price = 899.0   // –ò–∑–º–µ–Ω—è–µ–º –∫–æ–ø–∏—é

print(product1.price)    // 999.0 ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª –ù–ï –∏–∑–º–µ–Ω–∏–ª—Å—è!
print(product2.price)    // 899.0 ‚Äî –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—è
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è value type

```
–®–∞–≥ 1: –°–æ–∑–¥–∞—ë–º product1
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ product1                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ id: 1                ‚îÇ ‚îÇ
‚îÇ ‚îÇ name: "iPhone"       ‚îÇ ‚îÇ
‚îÇ ‚îÇ price: 999.0         ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–®–∞–≥ 2: product2 = product1 (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ product1                 ‚îÇ    ‚îÇ product2                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ id: 1                ‚îÇ ‚îÇ    ‚îÇ ‚îÇ id: 1                ‚îÇ ‚îÇ
‚îÇ ‚îÇ name: "iPhone"       ‚îÇ ‚îÇ    ‚îÇ ‚îÇ name: "iPhone"       ‚îÇ ‚îÇ
‚îÇ ‚îÇ price: 999.0         ‚îÇ ‚îÇ    ‚îÇ ‚îÇ price: 999.0         ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üë                               ‚Üë
   –û—Ä–∏–≥–∏–Ω–∞–ª                          –ö–æ–ø–∏—è

–®–∞–≥ 3: product2.price = 899.0
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ product1                 ‚îÇ    ‚îÇ product2                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ id: 1                ‚îÇ ‚îÇ    ‚îÇ ‚îÇ id: 1                ‚îÇ ‚îÇ
‚îÇ ‚îÇ name: "iPhone"       ‚îÇ ‚îÇ    ‚îÇ ‚îÇ name: "iPhone"       ‚îÇ ‚îÇ
‚îÇ ‚îÇ price: 999.0 ‚úì       ‚îÇ ‚îÇ    ‚îÇ ‚îÇ price: 899.0 ‚úì       ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  –ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è!                    –ò–∑–º–µ–Ω–∏–ª–∞—Å—å –∫–æ–ø–∏—è
```

### –ú–µ—Ç–æ–¥—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```swift
struct Rectangle {
    var width: Double
    var height: Double

    // –û–±—ã—á–Ω—ã–π –º–µ—Ç–æ–¥ (—Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞)
    func area() -> Double {
        return width * height
    }

    func perimeter() -> Double {
        return 2 * (width + height)
    }

    func describe() -> String {
        return "–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ \(width) x \(height)"
    }
}

let rect = Rectangle(width: 10, height: 5)
print(rect.area())       // 50.0
print(rect.perimeter())  // 30.0
print(rect.describe())   // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ 10.0 x 5.0
```

### Mutating –º–µ—Ç–æ–¥—ã ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤

–ü–æ—Å–∫–æ–ª—å–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äî value type, –º–µ—Ç–æ–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **–Ω–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞**. –ß—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mutating`:

```swift
struct Point {
    var x: Double
    var y: Double

    // ‚ùå –û—à–∏–±–∫–∞: Cannot assign to property: 'self' is immutable
    // func move(dx: Double, dy: Double) {
    //     x += dx
    //     y += dy
    // }

    // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ–º mutating
    mutating func move(dx: Double, dy: Double) {
        x += dx
        y += dy
    }

    mutating func reset() {
        x = 0
        y = 0
    }

    // –û–±—ã—á–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç mutating (—Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç)
    func distance(to other: Point) -> Double {
        let dx = other.x - x
        let dy = other.y - y
        return sqrt(dx * dx + dy * dy)
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
var point = Point(x: 0, y: 0)
point.move(dx: 3, dy: 4)
print(point)  // Point(x: 3.0, y: 4.0)

let origin = Point(x: 0, y: 0)
print(point.distance(to: origin))  // 5.0

// ‚ö†Ô∏è –í–∞–∂–Ω–æ: mutating –º–µ—Ç–æ–¥—ã –Ω–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ
let fixedPoint = Point(x: 10, y: 10)
// fixedPoint.move(dx: 1, dy: 1)  // ‚ùå –û—à–∏–±–∫–∞!
```

### –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (Computed Properties)

–í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –≤—ã—á–∏—Å–ª—è—é—Ç –µ–≥–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–æ—Å—Ç—É–ø–µ:

```swift
struct Circle {
    // –•—Ä–∞–Ω–∏–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    var radius: Double

    // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
    var diameter: Double {
        return radius * 2
    }

    var area: Double {
        return .pi * radius * radius
    }

    var circumference: Double {
        return 2 * .pi * radius
    }

    // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Å –≥–µ—Ç—Ç–µ—Ä–æ–º –∏ —Å–µ—Ç—Ç–µ—Ä–æ–º
    var diameterWithSetter: Double {
        get {
            return radius * 2
        }
        set {
            // newValue ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
            radius = newValue / 2
        }
    }
}

var circle = Circle(radius: 5)

// –ß—Ç–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö —Å–≤–æ–π—Å—Ç–≤
print(circle.diameter)       // 10.0
print(circle.area)           // 78.54...
print(circle.circumference)  // 31.42...

// –ó–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ —Å–µ—Ç—Ç–µ—Ä
circle.diameterWithSetter = 20
print(circle.radius)         // 10.0 (—Ä–∞–¥–∏—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è)
```

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –º–µ—Ç–æ–¥—ã

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —á–ª–µ–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç **—Ç–∏–ø—É**, –∞ –Ω–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—É:

```swift
struct APIConfig {
    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ ‚Äî –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
    static let baseURL = "https://fakestoreapi.com"
    static let apiVersion = "v1"
    static var timeout: TimeInterval = 30.0

    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥
    static func buildURL(endpoint: String) -> String {
        return "\(baseURL)/\(apiVersion)/\(endpoint)"
    }
}

// –î–æ—Å—Ç—É–ø –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
print(APIConfig.baseURL)                    // https://fakestoreapi.com
print(APIConfig.buildURL(endpoint: "products"))  // https://fakestoreapi.com/v1/products

// –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
APIConfig.timeout = 60.0
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

```swift
struct User {
    let id: Int
    var email: String
    var name: String
    var createdAt: Date

    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä
    init(id: Int, email: String, name: String) {
        self.id = id
        self.email = email.lowercased()  // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è email
        self.name = name.trimmingCharacters(in: .whitespaces)
        self.createdAt = Date()  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞
    }

    // Convenience –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    init(testUser name: String) {
        self.init(
            id: Int.random(in: 1...1000),
            email: "\(name.lowercased())@test.com",
            name: name
        )
    }
}

let user = User(id: 1, email: "JOHN@EXAMPLE.COM", name: "  John  ")
print(user.email)  // john@example.com (–ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫ lowercase)
print(user.name)   // John (—É–±—Ä–∞–Ω—ã –ø—Ä–æ–±–µ–ª—ã)

let testUser = User(testUser: "Alice")
print(testUser.email)  // alice@test.com
```

### Failable Initializer ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

```swift
struct Email {
    let address: String

    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç nil, –µ—Å–ª–∏ email –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
    init?(_ string: String) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞
        guard string.contains("@"),
              string.contains("."),
              string.count >= 5 else {
            return nil  // –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π email
        }

        self.address = string.lowercased()
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if let validEmail = Email("user@example.com") {
    print("Email –≤–∞–ª–∏–¥–Ω—ã–π: \(validEmail.address)")
} else {
    print("–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π email")
}

let invalidEmail = Email("not-an-email")  // nil
```

---

## 5.2 –ö–ª–∞—Å—Å—ã (class) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–ª–∞—Å—Å

–ö–ª–∞—Å—Å ‚Äî —ç—Ç–æ **—Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø (reference type)**. –ö–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –∫–ª–∞—Å—Å –∏–ª–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç–µ –µ–≥–æ –¥—Ä—É–≥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è **—Å—Å—ã–ª–∫–∞** –Ω–∞ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏.

```
–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏:
–ö–ª–∞—Å—Å ‚Äî –∫–∞–∫ Google –î–æ–∫—É–º–µ–Ω—Ç. –ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –¥—Ä—É–≥–æ–º,
–≤—ã –æ–±–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –û–î–ù–ò–ú –ò –¢–ï–ú –ñ–ï –¥–æ–∫—É–º–µ–Ω—Ç–æ–º. –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ
–≤–∏–¥–Ω—ã –¥—Ä—É–≥–æ–º—É.
```

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–ª–∞—Å—Å–∞

```swift
class Person {
    // –°–≤–æ–π—Å—Ç–≤–∞
    var name: String
    var age: Int
    var email: String?  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ

    // ‚ö†Ô∏è –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç struct, –∫–ª–∞—Å—Å –¢–†–ï–ë–£–ï–¢ —è–≤–Ω—ã–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä
    init(name: String, age: Int, email: String? = nil) {
        self.name = name
        self.age = age
        self.email = email
    }

    // –ú–µ—Ç–æ–¥—ã
    func introduce() {
        print("–ü—Ä–∏–≤–µ—Ç, —è \(name), –º–Ω–µ \(age) –ª–µ—Ç")
    }

    func celebrateBirthday() {
        age += 1
        print("\(name) –æ—Ç–º–µ—á–∞–µ—Ç –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è! –¢–µ–ø–µ—Ä—å –µ–º—É/–µ–π \(age)")
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
let person = Person(name: "–ê–Ω–Ω–∞", age: 25)
person.introduce()  // –ü—Ä–∏–≤–µ—Ç, —è –ê–Ω–Ω–∞, –º–Ω–µ 25 –ª–µ—Ç
```

### –ü–æ—á–µ–º—É –∫–ª–∞—Å—Å—ã ‚Äî —ç—Ç–æ reference type

```swift
// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ—á–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏–∫–∏
let person1 = Person(name: "–ò–≤–∞–Ω", age: 30)
let person2 = person1  // person2 —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¢–û–¢ –ñ–ï –æ–±—ä–µ–∫—Ç

person2.age = 35  // –ò–∑–º–µ–Ω—è–µ–º —á–µ—Ä–µ–∑ –≤—Ç–æ—Ä—É—é —Å—Å—ã–ª–∫—É

print(person1.age)  // 35 ‚Äî –∏–∑–º–µ–Ω–∏–ª—Å—è –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª!
print(person2.age)  // 35

// –≠—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç
print(person1 === person2)  // true (–æ–ø–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏)
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è reference type

```
–®–∞–≥ 1: –°–æ–∑–¥–∞—ë–º person1
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ person1      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ –û–±—ä–µ–∫—Ç Person        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ name: "–ò–≤–∞–Ω"         ‚îÇ
                         ‚îÇ age: 30              ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              Heap (–∫—É—á–∞ –ø–∞–º—è—Ç–∏)

–®–∞–≥ 2: person2 = person1 (–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –°–°–´–õ–ö–ê, –Ω–µ –æ–±—ä–µ–∫—Ç)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ person1      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ –û–±—ä–µ–∫—Ç Person        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ name: "–ò–≤–∞–Ω"         ‚îÇ
‚îÇ person2      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ age: 30              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                  –û–¥–∏–Ω –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏!

–®–∞–≥ 3: person2.age = 35 (–æ–±–µ —Å—Å—ã–ª–∫–∏ –≤–∏–¥—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ person1      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ –û–±—ä–µ–∫—Ç Person        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ name: "–ò–≤–∞–Ω"         ‚îÇ
‚îÇ person2      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ age: 35 ‚Üê –∏–∑–º–µ–Ω–µ–Ω–æ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Deinitializer ‚Äî –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–∞

–¢–æ–ª—å–∫–æ –∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å deinit ‚Äî –∫–æ–¥, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞:

```swift
class FileHandler {
    let filename: String

    init(filename: String) {
        self.filename = filename
        print("üìÇ –§–∞–π–ª '\(filename)' –æ—Ç–∫—Ä—ã—Ç")
    }

    deinit {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏
        print("üìÅ –§–∞–π–ª '\(filename)' –∑–∞–∫—Ä—ã—Ç")
    }

    func read() -> String {
        return "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ \(filename)"
    }
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
func processFile() {
    let handler = FileHandler(filename: "data.json")
    // üìÇ –§–∞–π–ª 'data.json' –æ—Ç–∫—Ä—ã—Ç

    print(handler.read())
    // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ data.json

} // handler –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ scope, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è deinit
// üìÅ –§–∞–π–ª 'data.json' –∑–∞–∫—Ä—ã—Ç

processFile()
```

---

## 5.3 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ: struct vs class

### –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–ª–∏—á–∏–π

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | struct (Value Type) | class (Reference Type) |
|----------------|---------------------|------------------------|
| –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–ø–∏—è | –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ |
| –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| Deinitializer | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å (`deinit`) |
| Memberwise init | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π | ‚ùå –ù—É–∂–µ–Ω —è–≤–Ω—ã–π |
| Mutating –º–µ—Ç–æ–¥—ã | ‚úÖ –ù—É–∂–Ω—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è | ‚ùå –ù–µ –Ω—É–∂–Ω—ã |
| –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å (===) | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| let —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–≤–æ–π—Å—Ç–≤ | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ | ‚úÖ –ú–æ–∂–Ω–æ |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ | Stack (–±—ã—Å—Ç—Ä–µ–µ) | Heap (–º–µ–¥–ª–µ–Ω–Ω–µ–µ) |
| Reference counting | ‚ùå –ù–µ—Ç | ‚úÖ ARC |

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å struct (90% —Å–ª—É—á–∞–µ–≤ –≤ Swift)

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ struct –∫–æ–≥–¥–∞:**

1. **–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Å—Ç—ã–µ –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ**
   ```swift
   // ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Äî –ø—Ä–æ—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ
   struct Coordinate {
       var latitude: Double
       var longitude: Double
   }
   ```

2. **–ù—É–∂–Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–ø–∏–π**
   ```swift
   // ‚úÖ –ö–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º
   struct CartItem {
       var product: Product
       var quantity: Int
   }
   ```

3. **–≠—Ç–æ –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (Entity)**
   ```swift
   // ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –∏–∑ API
   struct Product {
       let id: Int
       let title: String
       let price: Double
       let description: String
       let category: String
       let image: String
   }

   struct User {
       let id: String
       var email: String
       var name: String
   }

   struct Order {
       let id: String
       let items: [CartItem]
       let total: Double
       let status: OrderStatus
   }
   ```

4. **–¢–∏–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Codable (JSON)**
   ```swift
   // ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ Codable
   struct APIResponse: Codable {
       let success: Bool
       let data: [Product]
   }
   ```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å class (10% —Å–ª—É—á–∞–µ–≤)

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ class –∫–æ–≥–¥–∞:**

1. **–ù—É–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ**
   ```swift
   // ‚úÖ –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç UIKit –∫–ª–∞—Å—Å–æ–≤
   class ProductCell: UITableViewCell {
       // –ù–∞—Å–ª–µ–¥—É–µ—Ç –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å UITableViewCell
   }

   class HomeViewController: UIViewController {
       // –ù–∞—Å–ª–µ–¥—É–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª, view, –Ω–∞–≤–∏–≥–∞—Ü–∏—é
   }
   ```

2. **–û–¥–∏–Ω –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö (shared state)**
   ```swift
   // ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã ‚Äî –æ–¥–Ω–∞ –∫–æ–ø–∏—è –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   class AuthManager {
       static let shared = AuthManager()  // Singleton

       var currentUser: User?
       var isLoggedIn: Bool { currentUser != nil }
   }

   class ShoppingCart {
       static let shared = ShoppingCart()

       var items: [CartItem] = []

       func add(_ product: Product) {
           // –í—Å–µ —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–∏–¥—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
       }
   }
   ```

3. **–û–±—ä–µ–∫—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–Ω–µ—à–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏**
   ```swift
   // ‚úÖ –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —Ñ–∞–π–ª—ã, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   class NetworkManager {
       private let session = URLSession.shared

       deinit {
           // –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
           session.invalidateAndCancel()
       }
   }

   class DatabaseConnection {
       private var connection: Connection?

       deinit {
           connection?.close()
       }
   }
   ```

4. **–†–∞–±–æ—Ç–∞ —Å Objective-C / UIKit**
   ```swift
   // ‚úÖ UIKit –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∫–ª–∞—Å—Å–∞—Ö
   // –í—Å–µ UIViewController, UIView ‚Äî –∫–ª–∞—Å—Å—ã
   // Delegate pattern —Ç—Ä–µ–±—É–µ—Ç class –¥–ª—è weak —Å—Å—ã–ª–æ–∫

   protocol DataSourceDelegate: AnyObject {  // AnyObject = —Ç–æ–ª—å–∫–æ –∫–ª–∞—Å—Å—ã
       func didUpdateData()
   }

   class DataSource {
       weak var delegate: DataSourceDelegate?  // weak —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
   }
   ```

### –ü—Ä–∞–≤–∏–ª–æ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ü–†–ê–í–ò–õ–û –í–´–ë–û–†–ê                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ STRUCT                           ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CLASS —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:                             ‚îÇ
‚îÇ  1. –ù—É–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–æ—Ç UIKit –∫–ª–∞—Å—Å–æ–≤)                  ‚îÇ
‚îÇ  2. –ù—É–∂–µ–Ω shared state (Singleton, Manager)                ‚îÇ
‚îÇ  3. –ù—É–∂–µ–Ω deinit –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤                      ‚îÇ
‚îÇ  4. –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å Objective-C API                            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 5.4 –°–≤–æ–π—Å—Ç–≤–∞ ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –¢–∏–ø—ã —Å–≤–æ–π—Å—Ç–≤ –≤ Swift

```swift
class Example {
    // 1. Stored Property ‚Äî —Ö—Ä–∞–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
    var storedProperty: String = "value"

    // 2. Lazy Stored Property ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–æ—Å—Ç—É–ø–µ
    lazy var lazyProperty: String = {
        print("–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è lazy —Å–≤–æ–π—Å—Ç–≤–æ")
        return "lazy value"
    }()

    // 3. Computed Property ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
    var computedProperty: String {
        return "computed: \(storedProperty)"
    }

    // 4. Type Property ‚Äî –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–∏–ø—É, –Ω–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—É
    static var typeProperty: String = "shared"
}
```

### Stored Properties –ø–æ–¥—Ä–æ–±–Ω–æ

```swift
struct Product {
    // –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
    let id: Int

    // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äî –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å
    var name: String

    // –°–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    var isAvailable: Bool = true

    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    var discount: Double?

    // Private ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ç–∏–ø–∞
    private var internalNote: String = ""
}
```

### Lazy Properties ‚Äî –ª–µ–Ω–∏–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞

–õ–µ–Ω–∏–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–æ—Å—Ç—É–ø–µ**. –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
- –¢—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –ó–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–≤–æ–π—Å—Ç–≤

```swift
class DataLoader {
    // –¢—è–∂—ë–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è ‚Äî –Ω–µ —Ö–æ—Ç–∏–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞
    lazy var loadedData: [String] = {
        print("‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...")
        // –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —ç—Ç–æ –¥–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
        Thread.sleep(forTimeInterval: 1)
        print("‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
        return ["item1", "item2", "item3"]
    }()

    init() {
        print("DataLoader —Å–æ–∑–¥–∞–Ω")
    }
}

let loader = DataLoader()
// DataLoader —Å–æ–∑–¥–∞–Ω

// –î–∞–Ω–Ω—ã–µ –µ—â—ë –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω—ã!

print(loader.loadedData)  // –¢–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–≥—Ä—É–∑–∫–∞
// ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...
// ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
// ["item1", "item2", "item3"]

print(loader.loadedData)  // –ü–æ–≤—Ç–æ—Ä–Ω–æ –ù–ï –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è
// ["item1", "item2", "item3"]
```

### Computed Properties ‚Äî –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞

```swift
struct Temperature {
    // –•—Ä–∞–Ω–∏–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ (–∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)
    var celsius: Double

    // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
    var fahrenheit: Double {
        return celsius * 9/5 + 32
    }

    // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Å getter –∏ setter
    var kelvin: Double {
        get {
            return celsius + 273.15
        }
        set {
            celsius = newValue - 273.15
        }
    }

    // –ö—Ä–∞—Ç–∫–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è read-only (–±–µ–∑ return)
    var description: String {
        "\(celsius)¬∞C = \(fahrenheit)¬∞F = \(kelvin)K"
    }
}

var temp = Temperature(celsius: 25)
print(temp.fahrenheit)   // 77.0
print(temp.kelvin)       // 298.15
print(temp.description)  // 25.0¬∞C = 77.0¬∞F = 298.15K

// –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ setter
temp.kelvin = 300
print(temp.celsius)      // 26.85
```

### Property Observers ‚Äî –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ —Å–≤–æ–π—Å—Ç–≤

```swift
class UserProfile {
    var name: String = "" {
        willSet {
            // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è
            // newValue ‚Äî –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
            print("–ò–º—è –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ —Å '\(name)' –Ω–∞ '\(newValue)'")
        }
        didSet {
            // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–û–°–õ–ï –∏–∑–º–µ–Ω–µ–Ω–∏—è
            // oldValue ‚Äî —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            print("–ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ —Å '\(oldValue)' –Ω–∞ '\(name)'")

            // –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–±–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
            updateUI()
        }
    }

    var email: String = "" {
        didSet {
            // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            if !email.contains("@") {
                print("‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email!")
                email = oldValue  // –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é
            }
        }
    }

    private func updateUI() {
        print("üîÑ UI –æ–±–Ω–æ–≤–ª—ë–Ω")
    }
}

let profile = UserProfile()
profile.name = "–ò–≤–∞–Ω"
// –ò–º—è –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ —Å '' –Ω–∞ '–ò–≤–∞–Ω'
// –ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ —Å '' –Ω–∞ '–ò–≤–∞–Ω'
// üîÑ UI –æ–±–Ω–æ–≤–ª—ë–Ω

profile.email = "invalid"
// ‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email!
print(profile.email)  // "" (–æ—Å—Ç–∞–ª–æ—Å—å –ø—É—Å—Ç—ã–º)

profile.email = "ivan@mail.ru"
print(profile.email)  // ivan@mail.ru
```

### Access Control ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º

```swift
class BankAccount {
    // public ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ –≤–µ–∑–¥–µ (–¥–ª—è frameworks)
    public let accountNumber: String

    // internal ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –º–æ–¥—É–ª–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    internal var accountName: String

    // fileprivate ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
    fileprivate var transactions: [String] = []

    // private ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º —Ç–∏–ø–µ
    private var balance: Double = 0

    // private(set) ‚Äî —á–∏—Ç–∞—Ç—å –º–æ–∂–Ω–æ, –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏
    private(set) var lastTransaction: Date?

    init(number: String, name: String) {
        self.accountNumber = number
        self.accountName = name
    }

    // –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å private –¥–∞–Ω–Ω—ã–º–∏
    func deposit(_ amount: Double) {
        guard amount > 0 else { return }
        balance += amount
        lastTransaction = Date()
        transactions.append("Deposit: +\(amount)")
    }

    func getBalance() -> Double {
        return balance  // –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –¥–æ—Å—Ç—É–ø
    }
}

let account = BankAccount(number: "123", name: "Savings")
account.deposit(1000)

// ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å
print(account.accountNumber)   // 123
print(account.lastTransaction) // Optional(Date...)

// ‚ùå –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å private
// account.balance = 1000000   // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
// account.lastTransaction = nil  // –û—à–∏–±–∫–∞: setter –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

// ‚úÖ –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã
print(account.getBalance())  // 1000.0
```

---

## 5.5 –ú–µ—Ç–æ–¥—ã ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### Instance Methods ‚Äî –º–µ—Ç–æ–¥—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

```swift
class ShoppingCart {
    private var items: [String: Int] = [:]  // productId: quantity

    // –ú–µ—Ç–æ–¥ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
    func addItem(_ productId: String, quantity: Int = 1) {
        if let existing = items[productId] {
            items[productId] = existing + quantity
        } else {
            items[productId] = quantity
        }
    }

    // –ú–µ—Ç–æ–¥ —Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
    func getQuantity(for productId: String) -> Int {
        return items[productId] ?? 0
    }

    // –ú–µ—Ç–æ–¥ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    func updateQuantity(productId: String, to newQuantity: Int) {
        if newQuantity <= 0 {
            items.removeValue(forKey: productId)
        } else {
            items[productId] = newQuantity
        }
    }

    // –ú–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π Optional
    func removeItem(_ productId: String) -> Int? {
        return items.removeValue(forKey: productId)
    }

    // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –≤–º–µ—Å—Ç–æ –º–µ—Ç–æ–¥–∞ (–∫–æ–≥–¥–∞ –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
    var totalItems: Int {
        return items.values.reduce(0, +)
    }

    var isEmpty: Bool {
        return items.isEmpty
    }
}
```

### Static vs Class Methods

```swift
class Animal {
    // static ‚Äî –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –ø–æ–¥–∫–ª–∞—Å—Å–µ
    static func staticMethod() {
        print("–≠—Ç–æ static –º–µ—Ç–æ–¥ Animal")
    }

    // class ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –ø–æ–¥–∫–ª–∞—Å—Å–µ
    class func classMethod() {
        print("–≠—Ç–æ class –º–µ—Ç–æ–¥ Animal")
    }
}

class Dog: Animal {
    // ‚ùå –û—à–∏–±–∫–∞: Cannot override static method
    // override static func staticMethod() { }

    // ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å class –º–µ—Ç–æ–¥
    override class func classMethod() {
        print("–≠—Ç–æ class –º–µ—Ç–æ–¥ Dog")
    }
}

Animal.staticMethod()  // –≠—Ç–æ static –º–µ—Ç–æ–¥ Animal
Dog.staticMethod()     // –≠—Ç–æ static –º–µ—Ç–æ–¥ Animal (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è)

Animal.classMethod()   // –≠—Ç–æ class –º–µ—Ç–æ–¥ Animal
Dog.classMethod()      // –≠—Ç–æ class –º–µ—Ç–æ–¥ Dog (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω)
```

### Self –∏ self

```swift
class Counter {
    var count = 0

    // self (lowercase) ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä
    func increment() {
        self.count += 1  // self –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å
        count += 1       // –¢–æ –∂–µ —Å–∞–º–æ–µ
    }

    // self –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –∏–º—ë–Ω
    func set(count: Int) {
        self.count = count  // self.count ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ, count ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä
    }

    // Self (uppercase) ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–∏–ø
    static func create() -> Self {
        return Self()  // –°–æ–∑–¥–∞—ë—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ–∫—É—â–µ–≥–æ –∫–ª–∞—Å—Å–∞
    }

    class func createNew() -> Self {
        return self.init()  // self.init() –¥–ª—è class methods
    }

    required init() {}
}
```

---

## 5.6 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### Designated vs Convenience Initializers

```swift
class Vehicle {
    var brand: String
    var model: String
    var year: Int
    var color: String

    // Designated Initializer ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –í–°–ï —Å–≤–æ–π—Å—Ç–≤–∞
    init(brand: String, model: String, year: Int, color: String) {
        self.brand = brand
        self.model = model
        self.year = year
        self.color = color
    }

    // Convenience Initializer ‚Äî —É–¥–æ–±–Ω—ã–π, –≤—ã–∑—ã–≤–∞–µ—Ç designated
    convenience init(brand: String, model: String, year: Int) {
        self.init(brand: brand, model: model, year: year, color: "–±–µ–ª—ã–π")
    }

    convenience init(brand: String, model: String) {
        self.init(brand: brand, model: model, year: Calendar.current.component(.year, from: Date()))
    }

    convenience init() {
        self.init(brand: "Unknown", model: "Unknown")
    }
}

// –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è
let v1 = Vehicle(brand: "BMW", model: "X5", year: 2023, color: "—á—ë—Ä–Ω—ã–π")
let v2 = Vehicle(brand: "Toyota", model: "Camry", year: 2024)  // –±–µ–ª—ã–π
let v3 = Vehicle(brand: "Mercedes", model: "C-Class")          // –±–µ–ª—ã–π, 2024
let v4 = Vehicle()                                              // Unknown, Unknown, –±–µ–ª—ã–π, 2024
```

### –ü—Ä–∞–≤–∏–ª–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏

```swift
class Animal {
    var name: String

    // Designated initializer —Ä–æ–¥–∏—Ç–µ–ª—è
    init(name: String) {
        self.name = name
    }

    convenience init() {
        self.init(name: "Unknown")
    }
}

class Dog: Animal {
    var breed: String

    // Designated initializer –ø–æ—Ç–æ–º–∫–∞
    // –ü—Ä–∞–≤–∏–ª–æ: –°–ù–ê–ß–ê–õ–ê –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–≤–æ–∏ —Å–≤–æ–π—Å—Ç–≤–∞, –ü–û–¢–û–ú –≤—ã–∑—ã–≤–∞–µ–º super.init
    init(name: String, breed: String) {
        // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤
        self.breed = breed

        // 2. –í—ã–∑–æ–≤ designated init —Ä–æ–¥–∏—Ç–µ–ª—è
        super.init(name: name)

        // 3. –ü–æ—Å–ª–µ super.init –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å self
        print("–°–æ–∑–¥–∞–Ω–∞ —Å–æ–±–∞–∫–∞: \(self.name)")
    }

    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ convenience init —Ä–æ–¥–∏—Ç–µ–ª—è
    override convenience init(name: String) {
        self.init(name: name, breed: "–î–≤–æ—Ä–Ω—è–≥–∞")
    }

    // –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π convenience init
    convenience init(breed: String) {
        self.init(name: "–ü—ë—Å", breed: breed)
    }
}

let dog1 = Dog(name: "–ë–æ–±–∏–∫", breed: "–õ–∞–±—Ä–∞–¥–æ—Ä")
let dog2 = Dog(name: "–®–∞—Ä–∏–∫")  // breed = –î–≤–æ—Ä–Ω—è–≥–∞
let dog3 = Dog(breed: "–û–≤—á–∞—Ä–∫–∞")  // name = –ü—ë—Å
```

### Required Initializers

```swift
class BaseView {
    var frame: CGRect

    // Required ‚Äî –≤—Å–µ –ø–æ–¥–∫–ª–∞—Å—Å—ã –û–ë–Ø–ó–ê–ù–´ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
    required init(frame: CGRect) {
        self.frame = frame
    }
}

class CustomView: BaseView {
    var title: String

    init(frame: CGRect, title: String) {
        self.title = title
        super.init(frame: frame)
    }

    // –û–ë–Ø–ó–ê–ù–´ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å required init
    required init(frame: CGRect) {
        self.title = "Default"
        super.init(frame: frame)
    }
}

// –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —á–µ—Ä–µ–∑ —Ç–∏–ø
func createView<T: BaseView>(type: T.Type, frame: CGRect) -> T {
    return type.init(frame: frame)  // –†–∞–±–æ—Ç–∞–µ—Ç –±–ª–∞–≥–æ–¥–∞—Ä—è required
}

let view = createView(type: CustomView.self, frame: .zero)
```

### Failable Initializers —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º

```swift
class Document {
    var title: String

    init?(title: String) {
        guard !title.isEmpty else { return nil }
        self.title = title
    }
}

class TextDocument: Document {
    var content: String

    init?(title: String, content: String) {
        guard !content.isEmpty else { return nil }
        self.content = content
        super.init(title: title)  // –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å nil
    }
}

let doc1 = TextDocument(title: "–ó–∞–º–µ—Ç–∫–∏", content: "–¢–µ–∫—Å—Ç")  // ‚úÖ
let doc2 = TextDocument(title: "", content: "–¢–µ–∫—Å—Ç")        // nil (–ø—É—Å—Ç–æ–π title)
let doc3 = TextDocument(title: "–ó–∞–º–µ—Ç–∫–∏", content: "")      // nil (–ø—É—Å—Ç–æ–π content)
```

---

## 5.7 –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
1. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥** ‚Äî –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±—â—É—é –ª–æ–≥–∏–∫—É
2. **–†–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
3. **–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º** ‚Äî —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

```swift
// –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (—Ä–æ–¥–∏—Ç–µ–ª—å, superclass)
class Shape {
    var name: String
    var fillColor: String

    init(name: String, fillColor: String = "white") {
        self.name = name
        self.fillColor = fillColor
    }

    func area() -> Double {
        return 0  // –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
    }

    func describe() -> String {
        return "\(name) (—Ü–≤–µ—Ç: \(fillColor))"
    }
}

// –î–æ—á–µ—Ä–Ω–∏–π –∫–ª–∞—Å—Å (–ø–æ—Ç–æ–º–æ–∫, subclass)
class Circle: Shape {
    var radius: Double

    init(radius: Double, fillColor: String = "white") {
        // 1. –°–Ω–∞—á–∞–ª–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–≤–æ–∏ —Å–≤–æ–π—Å—Ç–≤–∞
        self.radius = radius
        // 2. –ü–æ—Ç–æ–º –≤—ã–∑—ã–≤–∞–µ–º init —Ä–æ–¥–∏—Ç–µ–ª—è
        super.init(name: "–ö—Ä—É–≥", fillColor: fillColor)
    }

    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞
    override func area() -> Double {
        return .pi * radius * radius
    }

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ (—Ç–æ–ª—å–∫–æ —É Circle)
    func diameter() -> Double {
        return radius * 2
    }
}

class Rectangle: Shape {
    var width: Double
    var height: Double

    init(width: Double, height: Double, fillColor: String = "white") {
        self.width = width
        self.height = height
        super.init(name: "–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫", fillColor: fillColor)
    }

    override func area() -> Double {
        return width * height
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
let circle = Circle(radius: 5, fillColor: "red")
print(circle.describe())  // –ö—Ä—É–≥ (—Ü–≤–µ—Ç: red)
print(circle.area())      // 78.54...
print(circle.diameter())  // 10.0

let rect = Rectangle(width: 10, height: 5)
print(rect.describe())    // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ (—Ü–≤–µ—Ç: white)
print(rect.area())        // 50.0
```

### –í—ã–∑–æ–≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (super)

```swift
class Employee {
    var name: String
    var salary: Double

    init(name: String, salary: Double) {
        self.name = name
        self.salary = salary
    }

    func getInfo() -> String {
        return "–°–æ—Ç—Ä—É–¥–Ω–∏–∫: \(name), –∑–∞—Ä–ø–ª–∞—Ç–∞: \(salary)"
    }

    func calculateBonus() -> Double {
        return salary * 0.1  // 10% –±–æ–Ω—É—Å
    }
}

class Manager: Employee {
    var teamSize: Int

    init(name: String, salary: Double, teamSize: Int) {
        self.teamSize = teamSize
        super.init(name: name, salary: salary)
    }

    override func getInfo() -> String {
        // –í—ã–∑—ã–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é + –¥–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ—ë
        return super.getInfo() + ", –∫–æ–º–∞–Ω–¥–∞: \(teamSize) —á–µ–ª."
    }

    override func calculateBonus() -> Double {
        // –ë–∞–∑–æ–≤—ã–π –±–æ–Ω—É—Å + –±–æ–Ω—É—Å –∑–∞ –∫–æ–º–∞–Ω–¥—É
        return super.calculateBonus() + Double(teamSize) * 1000
    }
}

let manager = Manager(name: "–ò–≤–∞–Ω", salary: 100000, teamSize: 5)
print(manager.getInfo())
// –°–æ—Ç—Ä—É–¥–Ω–∏–∫: –ò–≤–∞–Ω, –∑–∞—Ä–ø–ª–∞—Ç–∞: 100000.0, –∫–æ–º–∞–Ω–¥–∞: 5 —á–µ–ª.
print(manager.calculateBonus())
// 15000.0 (10000 –±–∞–∑–æ–≤—ã–π + 5000 –∑–∞ –∫–æ–º–∞–Ω–¥—É)
```

### final ‚Äî –∑–∞–ø—Ä–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

```swift
// final class ‚Äî –Ω–µ–ª—å–∑—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å
final class SecurityManager {
    static let shared = SecurityManager()
    private init() {}

    func validateToken(_ token: String) -> Bool {
        // –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        return true
    }
}

// ‚ùå –û—à–∏–±–∫–∞: Cannot inherit from final class
// class CustomSecurityManager: SecurityManager { }

class BaseViewController: UIViewController {
    // final method ‚Äî –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
    final func logAnalytics(event: String) {
        print("Analytics: \(event)")
    }

    // –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
    func setupUI() {
        // –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
    }
}

class HomeViewController: BaseViewController {
    // ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
    override func setupUI() {
        super.setupUI()
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
    }

    // ‚ùå –û—à–∏–±–∫–∞: Cannot override final method
    // override func logAnalytics(event: String) { }
}
```

### –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–≤—ã–º —Ç–∏–ø–æ–º

```swift
// –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ
let shapes: [Shape] = [
    Circle(radius: 5),
    Rectangle(width: 10, height: 5),
    Circle(radius: 3),
]

// –†–∞–±–æ—Ç–∞–µ–º —Å –º–∞—Å—Å–∏–≤–æ–º Shape, –Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
for shape in shapes {
    print("\(shape.name): –ø–ª–æ—â–∞–¥—å = \(shape.area())")
}
// –ö—Ä—É–≥: –ø–ª–æ—â–∞–¥—å = 78.54...
// –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫: –ø–ª–æ—â–∞–¥—å = 50.0
// –ö—Ä—É–≥: –ø–ª–æ—â–∞–¥—å = 28.27...

// –û–±—â–∞—è –ø–ª–æ—â–∞–¥—å –≤—Å–µ—Ö —Ñ–∏–≥—É—Ä
let totalArea = shapes.reduce(0) { $0 + $1.area() }
print("–û–±—â–∞—è –ø–ª–æ—â–∞–¥—å: \(totalArea)")
```

### Type Casting ‚Äî –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤

```swift
for shape in shapes {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞
    if shape is Circle {
        print("\(shape.name) ‚Äî —ç—Ç–æ –∫—Ä—É–≥")
    }

    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ (as?)
    if let circle = shape as? Circle {
        print("–î–∏–∞–º–µ—Ç—Ä: \(circle.diameter())")
    }

    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ (as!) ‚Äî –æ–ø–∞—Å–Ω–æ!
    // let circle = shape as! Circle  // Crash, –µ—Å–ª–∏ –Ω–µ Circle
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ switch –¥–ª—è type casting
for shape in shapes {
    switch shape {
    case let circle as Circle:
        print("–ö—Ä—É–≥ —Å —Ä–∞–¥–∏—É—Å–æ–º \(circle.radius)")
    case let rect as Rectangle:
        print("–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ \(rect.width) x \(rect.height)")
    default:
        print("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Ñ–∏–≥—É—Ä–∞")
    }
}
```

---

## 5.8 –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (enum) ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã enum

Enum –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —á–µ–º —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ —á–∏—Å–ª–∞:

```swift
// ‚ùå –ü–ª–æ—Ö–æ: –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
func setOrderStatus(_ status: String) {
    // –ß—Ç–æ –µ—Å–ª–∏ –æ–ø–µ—á–∞—Ç–∫–∞? "pendnig"?
}
setOrderStatus("pending")
setOrderStatus("Pending")  // –†–∞–∑–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã!
setOrderStatus("in_progress")

// ‚úÖ –•–æ—Ä–æ—à–æ: enum
enum OrderStatus {
    case pending
    case processing
    case shipped
    case delivered
    case cancelled
}

func setOrderStatus(_ status: OrderStatus) {
    // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
}
setOrderStatus(.pending)
// setOrderStatus(.pendnig)  // ‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
```

### Raw Values ‚Äî —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

```swift
// String raw values
enum HTTPMethod: String {
    case get = "GET"
    case post = "POST"
    case put = "PUT"
    case delete = "DELETE"
    case patch = "PATCH"
}

print(HTTPMethod.get.rawValue)  // "GET"

// –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ raw value
if let method = HTTPMethod(rawValue: "POST") {
    print(method)  // post
}

// Int raw values —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π
enum Priority: Int {
    case low = 1
    case medium = 2
    case high = 3
    case critical = 4
}

print(Priority.high.rawValue)  // 3

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ String raw values (—Ä–∞–≤–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—é case)
enum Category: String {
    case electronics  // rawValue = "electronics"
    case clothing     // rawValue = "clothing"
    case food         // rawValue = "food"
}

print(Category.electronics.rawValue)  // "electronics"
```

### Associated Values ‚Äî –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ enum

Associated values –ø–æ–∑–≤–æ–ª—è—é—Ç **—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤ –∫–∞–∂–¥–æ–º case:

```swift
enum NetworkResult {
    case success(data: Data, statusCode: Int)
    case failure(error: Error)
    case loading(progress: Double)
    case noConnection
}

func handleResult(_ result: NetworkResult) {
    switch result {
    case .success(let data, let code):
        print("‚úÖ –£—Å–ø–µ—Ö! –ü–æ–ª—É—á–µ–Ω–æ \(data.count) –±–∞–π—Ç, –∫–æ–¥ \(code)")

    case .failure(let error):
        print("‚ùå –û—à–∏–±–∫–∞: \(error.localizedDescription)")

    case .loading(let progress):
        print("‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞: \(Int(progress * 100))%")

    case .noConnection:
        print("üìµ –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
let result1 = NetworkResult.success(data: Data(), statusCode: 200)
let result2 = NetworkResult.loading(progress: 0.75)
handleResult(result1)  // ‚úÖ –£—Å–ø–µ—Ö! –ü–æ–ª—É—á–µ–Ω–æ 0 –±–∞–π—Ç, –∫–æ–¥ 200
handleResult(result2)  // ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞: 75%
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã

```swift
enum ValidationResult {
    case valid
    case invalid(errors: [String])

    var isValid: Bool {
        switch self {
        case .valid:
            return true
        case .invalid:
            return false
        }
    }

    var errorMessages: [String] {
        switch self {
        case .valid:
            return []
        case .invalid(let errors):
            return errors
        }
    }
}

enum PasswordStrength {
    case weak
    case medium
    case strong

    var color: String {
        switch self {
        case .weak: return "red"
        case .medium: return "orange"
        case .strong: return "green"
        }
    }
}

func validatePassword(_ password: String) -> (ValidationResult, PasswordStrength) {
    var errors: [String] = []

    if password.count < 8 {
        errors.append("–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤")
    }
    if !password.contains(where: { $0.isUppercase }) {
        errors.append("–ù—É–∂–Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞")
    }
    if !password.contains(where: { $0.isNumber }) {
        errors.append("–ù—É–∂–Ω–∞ —Ü–∏—Ñ—Ä–∞")
    }

    let strength: PasswordStrength
    if errors.isEmpty {
        strength = .strong
    } else if errors.count == 1 {
        strength = .medium
    } else {
        strength = .weak
    }

    let result = errors.isEmpty ? ValidationResult.valid : .invalid(errors: errors)
    return (result, strength)
}

let (result, strength) = validatePassword("Pass123")
print(result.errorMessages)  // ["–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤"]
print(strength.color)        // orange
```

### Enum —Å –º–µ—Ç–æ–¥–∞–º–∏

```swift
enum Direction: CaseIterable {
    case north, south, east, west

    // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    var degrees: Double {
        switch self {
        case .north: return 0
        case .east: return 90
        case .south: return 180
        case .west: return 270
        }
    }

    var opposite: Direction {
        switch self {
        case .north: return .south
        case .south: return .north
        case .east: return .west
        case .west: return .east
        }
    }

    // –ú–µ—Ç–æ–¥
    func turnRight() -> Direction {
        switch self {
        case .north: return .east
        case .east: return .south
        case .south: return .west
        case .west: return .north
        }
    }

    // Static –º–µ—Ç–æ–¥
    static func random() -> Direction {
        return allCases.randomElement()!
    }
}

var heading = Direction.north
heading = heading.turnRight()  // .east
print(heading.opposite)        // .west
print(heading.degrees)         // 90.0

// CaseIterable ‚Äî –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –≤—Å–µ–º case
for direction in Direction.allCases {
    print("\(direction): \(direction.degrees)¬∞")
}
```

---

## 5.9 –ü–æ—á–µ–º—É –≤ iOS –º—ã –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

### –ò–µ—Ä–∞—Ä—Ö–∏—è UIKit

```
NSObject                          ‚Üê –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Objective-C
    ‚îÇ
    ‚îî‚îÄ‚îÄ UIResponder               ‚Üê –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π (—Ç–∞—á–∏, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)
            ‚îÇ
            ‚îú‚îÄ‚îÄ UIApplication     ‚Üê Singleton –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            ‚îÇ
            ‚îú‚îÄ‚îÄ UIView            ‚Üê –ë–∞–∑–æ–≤—ã–π UI —ç–ª–µ–º–µ–Ω—Ç
            ‚îÇ   ‚îÇ
            ‚îÇ   ‚îú‚îÄ‚îÄ UILabel       ‚Üê –¢–µ–∫—Å—Ç
            ‚îÇ   ‚îú‚îÄ‚îÄ UIButton      ‚Üê –ö–Ω–æ–ø–∫–∞
            ‚îÇ   ‚îú‚îÄ‚îÄ UIImageView   ‚Üê –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            ‚îÇ   ‚îú‚îÄ‚îÄ UITextField   ‚Üê –ü–æ–ª–µ –≤–≤–æ–¥–∞
            ‚îÇ   ‚îú‚îÄ‚îÄ UIScrollView  ‚Üê –ü—Ä–æ–∫—Ä—É—Ç–∫–∞
            ‚îÇ   ‚îÇ   ‚îÇ
            ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UITableView      ‚Üê –°–ø–∏—Å–æ–∫
            ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UICollectionView ‚Üê –°–µ—Ç–∫–∞
            ‚îÇ   ‚îÇ
            ‚îÇ   ‚îî‚îÄ‚îÄ UIStackView   ‚Üê –°—Ç–µ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            ‚îÇ
            ‚îî‚îÄ‚îÄ UIViewController  ‚Üê –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —ç–∫—Ä–∞–Ω–∞
                    ‚îÇ
                    ‚îú‚îÄ‚îÄ UINavigationController  ‚Üê –°—Ç–µ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                    ‚îú‚îÄ‚îÄ UITabBarController      ‚Üê –í–∫–ª–∞–¥–∫–∏
                    ‚îî‚îÄ‚îÄ UIAlertController       ‚Üê –î–∏–∞–ª–æ–≥–∏
```

### –ü–æ—á–µ–º—É –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç UIViewController

```swift
// UIViewController –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
class MyViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        // 1. View –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è UI
        view.backgroundColor = .white

        // 2. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (viewDidLoad, viewWillAppear, etc.)

        // 3. –ù–∞–≤–∏–≥–∞—Ü–∏—é
        navigationController?.pushViewController(NextVC(), animated: true)

        // 4. –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –º–æ–¥–∞–ª—å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
        present(ModalVC(), animated: true)

        // 5. –û–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–≤–æ—Ä–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞
        // 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é (didReceiveMemoryWarning)
        // 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Interface Builder
    }

    // Lifecycle methods ‚Äî –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç UIViewController
    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
    }
}

// –ï—Å–ª–∏ –ù–ï –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç UIViewController:
// - –ù–µ—Ç view
// - –ù–µ—Ç lifecycle
// - –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Navigation/TabBar
// - –ü—Ä–∏–¥—ë—Ç—Å—è –≤—Å—ë –ø–∏—Å–∞—Ç—å —Å –Ω—É–ª—è
```

### –ü–æ—á–µ–º—É –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç UIView

```swift
// UIView –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
class CustomCardView: UIView {

    override init(frame: CGRect) {
        super.init(frame: frame)

        // 1. frame/bounds ‚Äî —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—è
        // 2. backgroundColor, alpha ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
        // 3. addSubview ‚Äî –∏–µ—Ä–∞—Ä—Ö–∏—è view
        // 4. layer ‚Äî —Ç–µ–Ω–∏, —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è, –∞–Ω–∏–º–∞—Ü–∏–∏
        // 5. Auto Layout anchors
        // 6. –û–±—Ä–∞–±–æ—Ç–∫—É –∫–∞—Å–∞–Ω–∏–π

        backgroundColor = .white
        layer.cornerRadius = 12
        layer.shadowOpacity = 0.1
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    // –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É
    override func draw(_ rect: CGRect) {
        // –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
    }

    // –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å layout
    override func layoutSubviews() {
        super.layoutSubviews()
        // –ö–∞—Å—Ç–æ–º–Ω—ã–π layout
    }
}
```

### –ü–æ—á–µ–º—É –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç UITableViewCell

```swift
// UITableViewCell –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
class ProductCell: UITableViewCell {

    // 1. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π contentView –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    // 2. Reuse mechanism (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
    // 3. Selection states (–≤—ã–¥–µ–ª–µ–Ω–∏–µ)
    // 4. Accessory views (—Å—Ç—Ä–µ–ª–∫–∏, –≥–∞–ª–æ—á–∫–∏)
    // 5. Swipe actions
    // 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å UITableView

    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)

        // –î–æ–±–∞–≤–ª—è–µ–º –≤ contentView, –∞ –Ω–µ –≤ self!
        contentView.addSubview(titleLabel)
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
    override func prepareForReuse() {
        super.prepareForReuse()
        titleLabel.text = nil
        imageView?.image = nil
    }

    private let titleLabel = UILabel()
}
```

---

## 5.10 –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ E-Commerce –ø—Ä–æ–µ–∫—Ç–∞

### Product Entity (struct)

```swift
// –ú–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞ ‚Äî struct, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –¥–∞–Ω–Ω—ã–µ
struct Product: Codable, Equatable {
    let id: Int
    let title: String
    let price: Double
    let description: String
    let category: String
    let image: String
    let rating: Rating

    struct Rating: Codable, Equatable {
        let rate: Double
        let count: Int
    }

    // –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
    var formattedPrice: String {
        return String(format: "$%.2f", price)
    }

    var isOnSale: Bool {
        return price < 50
    }
}
```

### NetworkManager (class + Singleton)

```swift
// –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Ç–∏ ‚Äî class, –ø–æ—Ç–æ–º—É —á—Ç–æ:
// 1. –û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (shared state)
// 2. –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å–∞–º–∏ (URLSession)
final class NetworkManager {
    // Singleton pattern
    static let shared = NetworkManager()

    // Private init –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
    private init() {}

    private let session = URLSession.shared
    private let decoder = JSONDecoder()

    func fetch<T: Decodable>(url: URL) async throws -> T {
        let (data, response) = try await session.data(from: url)

        guard let httpResponse = response as? HTTPURLResponse,
              (200...299).contains(httpResponse.statusCode) else {
            throw NetworkError.invalidResponse
        }

        return try decoder.decode(T.self, from: data)
    }
}
```

### CartItem (struct —Å –ª–æ–≥–∏–∫–æ–π)

```swift
struct CartItem: Equatable {
    let product: Product
    var quantity: Int

    var subtotal: Double {
        return product.price * Double(quantity)
    }

    var formattedSubtotal: String {
        return String(format: "$%.2f", subtotal)
    }

    // Mutating –º–µ—Ç–æ–¥—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    mutating func incrementQuantity() {
        quantity += 1
    }

    mutating func decrementQuantity() {
        if quantity > 1 {
            quantity -= 1
        }
    }

    mutating func setQuantity(_ newQuantity: Int) {
        quantity = max(1, newQuantity)
    }
}
```

### Error Enums

```swift
enum NetworkError: Error, LocalizedError {
    case invalidURL
    case invalidResponse
    case noData
    case decodingError(Error)
    case serverError(statusCode: Int)
    case noConnection

    var errorDescription: String? {
        switch self {
        case .invalidURL:
            return "–ù–µ–≤–µ—Ä–Ω—ã–π URL"
        case .invalidResponse:
            return "–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞"
        case .noData:
            return "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"
        case .decodingError(let error):
            return "–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: \(error.localizedDescription)"
        case .serverError(let code):
            return "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: \(code)"
        case .noConnection:
            return "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É"
        }
    }
}

enum AuthError: Error {
    case invalidCredentials
    case userNotFound
    case emailAlreadyInUse
    case weakPassword
    case networkError(Error)
    case unknown
}
```

---

## 5.11 –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 5.1: –ú–æ–¥–µ–ª—å –∫–æ—Ä–∑–∏–Ω—ã

–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –º–æ–¥–µ–ª—å –∫–æ—Ä–∑–∏–Ω—ã –ø–æ–∫—É–ø–æ–∫:
- `CartItem` (struct) —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
- `ShoppingCart` (class) —Å –º–µ—Ç–æ–¥–∞–º–∏ add, remove, updateQuantity
- –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞: totalItems, totalPrice

<details>
<summary>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</summary>

```swift
struct CartItem: Equatable {
    let product: Product
    var quantity: Int

    var subtotal: Double {
        product.price * Double(quantity)
    }

    static func == (lhs: CartItem, rhs: CartItem) -> Bool {
        return lhs.product.id == rhs.product.id
    }
}

class ShoppingCart {
    static let shared = ShoppingCart()
    private init() {}

    private(set) var items: [CartItem] = []

    var totalItems: Int {
        items.reduce(0) { $0 + $1.quantity }
    }

    var totalPrice: Double {
        items.reduce(0) { $0 + $1.subtotal }
    }

    var formattedTotal: String {
        String(format: "$%.2f", totalPrice)
    }

    var isEmpty: Bool {
        items.isEmpty
    }

    func add(_ product: Product, quantity: Int = 1) {
        if let index = items.firstIndex(where: { $0.product.id == product.id }) {
            items[index].quantity += quantity
        } else {
            items.append(CartItem(product: product, quantity: quantity))
        }
    }

    func remove(_ productId: Int) {
        items.removeAll { $0.product.id == productId }
    }

    func updateQuantity(productId: Int, quantity: Int) {
        guard let index = items.firstIndex(where: { $0.product.id == productId }) else {
            return
        }

        if quantity <= 0 {
            items.remove(at: index)
        } else {
            items[index].quantity = quantity
        }
    }

    func clear() {
        items.removeAll()
    }

    func contains(_ productId: Int) -> Bool {
        items.contains { $0.product.id == productId }
    }
}
```
</details>

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 5.2: Enum –¥–ª—è API Endpoints

–°–æ–∑–¥–∞–π—Ç–µ enum `Endpoint` —Å associated values –¥–ª—è —Ä–∞–∑–Ω—ã—Ö API endpoints:
- products (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π)
- product(id: Int)
- categories
- auth/login
- auth/register

<details>
<summary>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</summary>

```swift
enum Endpoint {
    case products(category: String? = nil)
    case product(id: Int)
    case categories
    case login(email: String, password: String)
    case register(email: String, password: String)

    var path: String {
        switch self {
        case .products(let category):
            if let category = category {
                return "/products/category/\(category)"
            }
            return "/products"
        case .product(let id):
            return "/products/\(id)"
        case .categories:
            return "/products/categories"
        case .login:
            return "/auth/login"
        case .register:
            return "/auth/register"
        }
    }

    var method: String {
        switch self {
        case .products, .product, .categories:
            return "GET"
        case .login, .register:
            return "POST"
        }
    }

    var body: Data? {
        switch self {
        case .login(let email, let password):
            return try? JSONEncoder().encode([
                "email": email,
                "password": password
            ])
        case .register(let email, let password):
            return try? JSONEncoder().encode([
                "email": email,
                "password": password
            ])
        default:
            return nil
        }
    }

    func buildURL(baseURL: String = "https://fakestoreapi.com") -> URL? {
        return URL(string: baseURL + path)
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
let endpoint1 = Endpoint.products()
let endpoint2 = Endpoint.products(category: "electronics")
let endpoint3 = Endpoint.product(id: 1)

print(endpoint1.path)  // /products
print(endpoint2.path)  // /products/category/electronics
print(endpoint3.buildURL()!)  // https://fakestoreapi.com/products/1
```
</details>

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 5.3: –ö–ª–∞—Å—Å —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º

–°–æ–∑–¥–∞–π—Ç–µ –∏–µ—Ä–∞—Ä—Ö–∏—é –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `User` (–±–∞–∑–æ–≤—ã–π) —Å email, name
- `Customer` (–Ω–∞—Å–ª–µ–¥–Ω–∏–∫) —Å shippingAddress
- `Admin` (–Ω–∞—Å–ª–µ–¥–Ω–∏–∫) —Å permissions

<details>
<summary>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</summary>

```swift
class User {
    let id: String
    var email: String
    var name: String
    let createdAt: Date

    init(id: String, email: String, name: String) {
        self.id = id
        self.email = email
        self.name = name
        self.createdAt = Date()
    }

    func describe() -> String {
        return "\(name) (\(email))"
    }

    func canAccess(_ resource: String) -> Bool {
        return true  // –ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø
    }
}

class Customer: User {
    var shippingAddress: String?
    var orderHistory: [String] = []  // Order IDs
    var loyaltyPoints: Int = 0

    init(id: String, email: String, name: String, shippingAddress: String? = nil) {
        self.shippingAddress = shippingAddress
        super.init(id: id, email: email, name: name)
    }

    override func describe() -> String {
        return super.describe() + " (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å, \(loyaltyPoints) –±–∞–ª–ª–æ–≤)"
    }

    func addLoyaltyPoints(_ points: Int) {
        loyaltyPoints += points
    }
}

class Admin: User {
    enum Permission: String, CaseIterable {
        case manageUsers
        case manageProducts
        case viewAnalytics
        case manageOrders
        case fullAccess
    }

    var permissions: Set<Permission>

    init(id: String, email: String, name: String, permissions: Set<Permission>) {
        self.permissions = permissions
        super.init(id: id, email: email, name: name)
    }

    convenience init(id: String, email: String, name: String, isSuperAdmin: Bool = false) {
        let perms: Set<Permission> = isSuperAdmin ? Set(Permission.allCases) : [.viewAnalytics]
        self.init(id: id, email: email, name: name, permissions: perms)
    }

    override func describe() -> String {
        return super.describe() + " (–ê–¥–º–∏–Ω, \(permissions.count) –ø—Ä–∞–≤)"
    }

    override func canAccess(_ resource: String) -> Bool {
        return permissions.contains(.fullAccess) || super.canAccess(resource)
    }

    func hasPermission(_ permission: Permission) -> Bool {
        return permissions.contains(permission) || permissions.contains(.fullAccess)
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
let customer = Customer(id: "1", email: "user@test.com", name: "–ò–≤–∞–Ω")
customer.addLoyaltyPoints(100)
print(customer.describe())  // –ò–≤–∞–Ω (user@test.com) (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å, 100 –±–∞–ª–ª–æ–≤)

let admin = Admin(id: "2", email: "admin@test.com", name: "–ê–¥–º–∏–Ω", isSuperAdmin: true)
print(admin.hasPermission(.manageUsers))  // true

// –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
let users: [User] = [customer, admin]
for user in users {
    print(user.describe())
}
```
</details>

---

## –ò—Ç–æ–≥–∏ –≥–ª–∞–≤—ã

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –≤—ã **–≥–ª—É–±–æ–∫–æ** –∏–∑—É—á–∏–ª–∏:

‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä—ã (struct)** ‚Äî value type, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, mutating –º–µ—Ç–æ–¥—ã

‚úÖ **–ö–ª–∞—Å—Å—ã (class)** ‚Äî reference type, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, deinit

‚úÖ **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å struct vs class** ‚Äî –ø—Ä–∞–≤–∏–ª–æ: struct –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

‚úÖ **–°–≤–æ–π—Å—Ç–≤–∞** ‚Äî stored, computed, lazy, observers, access control

‚úÖ **–ú–µ—Ç–æ–¥—ã** ‚Äî instance, static, class, mutating

‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã** ‚Äî designated, convenience, failable, required

‚úÖ **–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** ‚Äî override, super, final, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º

‚úÖ **Enum** ‚Äî raw values, associated values, –º–µ—Ç–æ–¥—ã

‚úÖ **–ü–æ—á–µ–º—É –≤ iOS –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç UIViewController, UIView, UITableViewCell**

---

## –°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞

–í [–ì–ª–∞–≤–µ 6](../06-Protocols/README.md) –º—ã –∏–∑—É—á–∏–º **–ø—Ä–æ—Ç–æ–∫–æ–ª—ã** ‚Äî –µ—â—ë –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.

---

> **–°–æ–≤–µ—Ç**: –ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–æ: **struct –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, class –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è**. –ú–æ–¥–µ–ª–∏ (Product, User, Order) ‚Äî struct. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã ‚Äî class. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ Swift —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
