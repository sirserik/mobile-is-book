# –ì–ª–∞–≤–∞ 20: –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –í–≤–µ–¥–µ–Ω–∏–µ

–í —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≥–ª–∞–≤–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º:
- –ú–æ–¥—É–ª—å –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Profile VIPER)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ (Addresses VIPER)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ (PaymentInfo VIPER)
- –ò—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–æ–≤ (OrderHistory)
- –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         PROFILE MODULE                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îÇ
‚îÇ    ‚îÇ         UserInfoView                ‚îÇ                          ‚îÇ
‚îÇ    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ                          ‚îÇ
‚îÇ    ‚îÇ   ‚îÇ      [Profile Photo]        ‚îÇ   ‚îÇ                          ‚îÇ
‚îÇ    ‚îÇ   ‚îÇ         140x140             ‚îÇ   ‚îÇ                          ‚îÇ
‚îÇ    ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ                          ‚îÇ
‚îÇ    ‚îÇ         user@email.com              ‚îÇ                          ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îÇ
‚îÇ    ‚îÇ  üó∫Ô∏è  Address Information        >   ‚îÇ ‚Üí AddressesModule        ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                          ‚îÇ
‚îÇ    ‚îÇ  üí≥  Payment Information        >   ‚îÇ ‚Üí PaymentInfoModule      ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                          ‚îÇ
‚îÇ    ‚îÇ  üì¶  Order History              >   ‚îÇ ‚Üí OrderHistoryModule     ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                          ‚îÇ
‚îÇ    ‚îÇ  üîå  Sign Out                       ‚îÇ ‚Üí LoginModule            ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 20.1 Entity-—Å–ª–æ–π: –ú–æ–¥–µ–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è

### CurrentUserModel ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```swift
// Entities/Models/CurrentUserModel.swift
import Foundation
import UIKit.UIImage

struct CurrentUserModel: Equatable {
    let profileImageURLString: String?
    let userEmail: String?
}
```

**–ê–Ω–∞–ª–∏–∑:**
- `profileImageURLString` ‚Äî URL —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –∏–∑ Firebase Auth (–º–æ–∂–µ—Ç –±—ã—Ç—å nil)
- `userEmail` ‚Äî email —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `Equatable` ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### ProfileRowItem ‚Äî —ç–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è

```swift
// Entities/Enums/ProfileRowItem.swift
import Foundation
import UIKit.UIImage

enum ProfileRowItem {
    case address
    case payment
    case orderHistory
    case signOut

    var title: String {
        switch self {
        case .address:
            return "Address Information"
        case .payment:
            return "Payment Information"
        case .orderHistory:
            return "Order History"
        case .signOut:
            return "Sign Out"
        }
    }

    var image: UIImage? {
        switch self {
        case .address:
            return UIImage(systemName: "map")
        case .payment:
            return UIImage(systemName: "creditcard")
        case .orderHistory:
            return UIImage(systemName: "wallet.pass")
        case .signOut:
            return UIImage(systemName: "power")
        }
    }
}
```

**–ü–æ—á–µ–º—É enum —Å computed properties:**
- –ö–∞–∂–¥—ã–π case ‚Äî –ø—É–Ω–∫—Ç –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è
- `title` ‚Äî —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `image` ‚Äî SF Symbol –∏–∫–æ–Ω–∫–∞
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

### ProfileRowItemModel ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞

```swift
// Entities/Models/ProfileRowItemModel.swift
import Foundation
import UIKit.UIImage

struct ProfileRowItemModel {
    let item: ProfileRowItem
}
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –æ–±—ë—Ä—Ç–∫–∞:**
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –±—É–¥—É—â–µ–º
- –û—Ç–¥–µ–ª—è–µ—Ç enum –æ—Ç –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

---

## 20.2 UserInfoManager ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```swift
// Managers/UserInfoManager/UserInfoManager.swift
import Foundation
import GoogleSignIn
import FirebaseAuth

protocol UserInfoManagerProtocol {
    func getUserProfilePictureAndEmail(completion: @escaping (_ photo: String?, _ email: String?) -> Void)
    func getUserUid() -> String?
}

final class UserInfoManager: UserInfoManagerProtocol {

    func getUserProfilePictureAndEmail(completion: @escaping (_ photo: String?, _ email: String?) -> Void) {
        if let currentUser = Auth.auth().currentUser {
            let profileImageURL = currentUser.photoURL
            completion(profileImageURL?.absoluteString, currentUser.email)
        } else {
            completion(nil, nil)
        }
    }

    func getUserUid() -> String? {
        return Auth.auth().currentUser?.uid
    }
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     UserInfoManager                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                   ‚îÇ
‚îÇ   getUserProfilePictureAndEmail()                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  Auth.auth().currentUser                                 ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       ‚Üì                                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  Firebase User Object                           ‚îÇ    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ photoURL: URL? (Google/Apple photo)        ‚îÇ    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ email: String?                             ‚îÇ    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ uid: String                                ‚îÇ    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       ‚Üì                                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  completion(photoURL?.absoluteString, email)             ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   getUserUid()                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  return Auth.auth().currentUser?.uid                     ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)    ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- `Auth.auth().currentUser` ‚Äî —Ç–µ–∫—É—â–∏–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `photoURL` ‚Äî URL —Ñ–æ—Ç–æ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ Google/Apple Sign-In)
- `uid` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

---

## 20.3 Profile VIPER Module

### ProfileRouter ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

```swift
// Modules/Profile/Base/ProfileRouter.swift
import Foundation
import UIKit.UIViewController

protocol ProfileRouterProtocol {
    func toLogin()
    func toAddresses()
    func toPaymentInfo()
    func toOrderHistory()
}

final class ProfileRouter {

    private weak var view: UIViewController?
    private let windowManager: RootWindowManagerProtocol?

    init(view: UIViewController, windowManager: RootWindowManagerProtocol) {
        self.view = view
        self.windowManager = windowManager
    }

    static func startProfileModule() -> UIViewController {
        let view = ProfileViewController()
        let router = ProfileRouter(view: view, windowManager: RootWindowManager.shared)
        let interactor = ProfileInteractor(userInfoManager: UserInfoManager(), authManager: AuthManager())
        let presenter = ProfilePresenter(view: view, interactor: interactor, router: router)

        view.presenter = presenter
        interactor.presenter = presenter

        return view
    }
}

extension ProfileRouter: ProfileRouterProtocol {

    func toLogin() {
        let loginModule = UINavigationController(rootViewController: LoginRouter.startLogin())
        windowManager?.changeRootViewController(loginModule, animated: true)
    }

    func toAddresses() {
        let addressesModule = AddressesRouter.startAddressesModule()
        self.view?.navigationController?.pushViewController(addressesModule, animated: true)
    }

    func toPaymentInfo() {
        let paymentInfoModule = PaymentInfoRouter.startPaymentInfoModule()
        self.view?.navigationController?.pushViewController(paymentInfoModule, animated: true)
    }

    func toOrderHistory() {
        let orderHistoryVC = OrderHistoryViewController()
        self.view?.navigationController?.pushViewController(orderHistoryVC, animated: true)
    }
}
```

**–î–∏–∞–≥—Ä–∞–º–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ProfileRouter Navigation                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   ProfileViewController                                              ‚îÇ
‚îÇ          ‚îÇ                                                           ‚îÇ
‚îÇ          ‚îú‚îÄ‚îÄ toAddresses() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí AddressesViewController           ‚îÇ
‚îÇ          ‚îÇ                              ‚îÇ                            ‚îÇ
‚îÇ          ‚îÇ                              ‚îî‚îÄ‚îÄ AddAddressViewController ‚îÇ
‚îÇ          ‚îÇ                                                           ‚îÇ
‚îÇ          ‚îú‚îÄ‚îÄ toPaymentInfo() ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí PaymentInfoViewController         ‚îÇ
‚îÇ          ‚îÇ                              ‚îÇ                            ‚îÇ
‚îÇ          ‚îÇ                              ‚îî‚îÄ‚îÄ AddCardViewController    ‚îÇ
‚îÇ          ‚îÇ                                                           ‚îÇ
‚îÇ          ‚îú‚îÄ‚îÄ toOrderHistory() ‚îÄ‚îÄ‚îÄ‚Üí OrderHistoryViewController        ‚îÇ
‚îÇ          ‚îÇ                                                           ‚îÇ
‚îÇ          ‚îî‚îÄ‚îÄ toLogin() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚ùå CHANGE ROOT WINDOW              ‚îÇ
‚îÇ                                        ‚îÇ                             ‚îÇ
‚îÇ                                        ‚Üì                             ‚îÇ
‚îÇ                                   LoginViewController                ‚îÇ
‚îÇ                                   (–Ω–æ–≤—ã–π root controller)            ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `toLogin()`:**
- –ù–µ –¥–µ–ª–∞–µ—Ç push, –∞ –º–µ–Ω—è–µ—Ç root –æ–∫–Ω–∞
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç navigation stack
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥

### ProfileInteractor ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

```swift
// Modules/Profile/Base/ProfileInteractor.swift
import Foundation

protocol ProfileInteractorInputs {
    func getUserInfos()
    func showItems() -> [ProfileRowItemModel]
    func signOutAction()
}

protocol ProfileInteractorOutputs: AnyObject {
    func showUserInfo(model: CurrentUserModel?)
    func startLoading()
    func endLoading()
    func signOutCompleted()
    func onError(message: String)
}

final class ProfileInteractor {

    weak var presenter: ProfileInteractorOutputs?
    private let userInfoManager: UserInfoManagerProtocol?
    private let authManager: AuthManagerProtocol?

    private let rowItems: [ProfileRowItemModel] = [
        .init(item: .address),
        .init(item: .payment),
        .init(item: .orderHistory),
        .init(item: .signOut)
    ]

    init(userInfoManager: UserInfoManagerProtocol, authManager: AuthManagerProtocol) {
        self.userInfoManager = userInfoManager
        self.authManager = authManager
    }
}

// MARK: - Interactor Inputs
extension ProfileInteractor: ProfileInteractorInputs {

    func getUserInfos() {
        userInfoManager?.getUserProfilePictureAndEmail(completion: { [weak self] photo, email in
            guard let self else { return }
            let model: CurrentUserModel = .init(profileImageURLString: photo, userEmail: email)
            presenter?.showUserInfo(model: model)
        })
    }

    func showItems() -> [ProfileRowItemModel] {
        return self.rowItems
    }

    func signOutAction() {
        presenter?.startLoading()
        authManager?.signOut { [weak self] result in
            guard let self else { return }
            presenter?.endLoading()

            switch result {
            case .success(_):
                presenter?.signOutCompleted()
            case .failure(let error):
                presenter?.onError(message: error.localizedDescription)
            }
        }
    }
}
```

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ProfileInteractor Flow                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                       ‚îÇ
‚îÇ   getUserInfos()                                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  userInfoManager.getUserProfilePictureAndEmail()             ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ           ‚Üì                                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  completion(photo, email)                                    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ           ‚Üì                                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  CurrentUserModel(profileImageURLString: photo,              ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                   userEmail: email)                          ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ           ‚Üì                                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  presenter?.showUserInfo(model: model)                       ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                       ‚îÇ
‚îÇ   signOutAction()                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  presenter?.startLoading()                                   ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ           ‚Üì                                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  authManager?.signOut { result in                            ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       switch result {                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       case .success:                                         ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ           presenter?.signOutCompleted()  ‚îÄ‚Üí Router.toLogin() ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       case .failure(error):                                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ           presenter?.onError(message)                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       }                                                      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  }                                                           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  presenter?.endLoading()                                     ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ProfilePresenter ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä

```swift
// Modules/Profile/Base/ProfilePresenter.swift
import Foundation

protocol ProfilePresenterInputs {
    func viewDidLoad()
    func numberOfRowsInSection() -> Int
    func cellForRowAt(indexPath: IndexPath) -> ProfileRowItemModel?
    func heightForRowAt(indexPath: IndexPath) -> CGFloat
    func didSelectRowAt(indexPath: IndexPath)
}

final class ProfilePresenter {

    private weak var view: ProfileViewProtocol?
    private let interactor: ProfileInteractorInputs?
    private let router: ProfileRouterProtocol?

    init(view: ProfileViewProtocol, interactor: ProfileInteractorInputs, router: ProfileRouterProtocol) {
        self.view = view
        self.interactor = interactor
        self.router = router
    }
}

// MARK: - Presenter Inputs
extension ProfilePresenter: ProfilePresenterInputs {

    func viewDidLoad() {
        view?.setNavTitle(title: "My Profile")
        view?.setBackgroundColor()
        view?.prepareUserInfoView()
        view?.prepareTableView()
        interactor?.getUserInfos()
    }

    func numberOfRowsInSection() -> Int {
        return interactor?.showItems().count ?? 0
    }

    func cellForRowAt(indexPath: IndexPath) -> ProfileRowItemModel? {
        return interactor?.showItems()[indexPath.row]
    }

    func heightForRowAt(indexPath: IndexPath) -> CGFloat {
        return 60
    }

    func didSelectRowAt(indexPath: IndexPath) {
        let selectedItem = interactor?.showItems()[indexPath.row]

        switch selectedItem?.item {
        case .address:
            router?.toAddresses()
        case .payment:
            router?.toPaymentInfo()
        case .orderHistory:
            router?.toOrderHistory()
        case .signOut:
            interactor?.signOutAction()
        default:
            break
        }
    }
}

// MARK: - Interactor to Presenter
extension ProfilePresenter: ProfileInteractorOutputs {

    func showUserInfo(model: CurrentUserModel?) {
        view?.showCurrentUserInfo(model: model)
    }

    func startLoading() {
        view?.startLoading()
    }

    func endLoading() {
        view?.endLoading()
    }

    func signOutCompleted() {
        router?.toLogin()
    }

    func onError(message: String) {
        view?.onError(message: message)
    }
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                didSelectRowAt() Switch Logic                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ   selectedItem?.item                                             ‚îÇ
‚îÇ        ‚îÇ                                                         ‚îÇ
‚îÇ        ‚îú‚îÄ‚îÄ .address ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí router?.toAddresses()             ‚îÇ
‚îÇ        ‚îÇ                       (push AddressesViewController)    ‚îÇ
‚îÇ        ‚îÇ                                                         ‚îÇ
‚îÇ        ‚îú‚îÄ‚îÄ .payment ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí router?.toPaymentInfo()           ‚îÇ
‚îÇ        ‚îÇ                       (push PaymentInfoViewController)  ‚îÇ
‚îÇ        ‚îÇ                                                         ‚îÇ
‚îÇ        ‚îú‚îÄ‚îÄ .orderHistory ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí router?.toOrderHistory()          ‚îÇ
‚îÇ        ‚îÇ                       (push OrderHistoryViewController) ‚îÇ
‚îÇ        ‚îÇ                                                         ‚îÇ
‚îÇ        ‚îî‚îÄ‚îÄ .signOut ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí interactor?.signOutAction()       ‚îÇ
‚îÇ                                     ‚îÇ                            ‚îÇ
‚îÇ                                     ‚Üì                            ‚îÇ
‚îÇ                               signOutCompleted()                 ‚îÇ
‚îÇ                                     ‚îÇ                            ‚îÇ
‚îÇ                                     ‚Üì                            ‚îÇ
‚îÇ                               router?.toLogin()                  ‚îÇ
‚îÇ                               (change root window)               ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ProfileViewController ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```swift
// Modules/Profile/Base/ProfileViewController.swift
import UIKit

protocol ProfileViewProtocol: AnyObject {
    func setNavTitle(title: String)
    func setBackgroundColor()
    func prepareUserInfoView()
    func prepareTableView()
    func startLoading()
    func endLoading()
    func onError(message: String)
    func showCurrentUserInfo(model: CurrentUserModel?)
}

final class ProfileViewController: UIViewController {

    private lazy var profileTableView: UITableView = {
        let tableView = UITableView()
        tableView.delegate = self
        tableView.dataSource = self
        tableView.register(ProfileCell.self, forCellReuseIdentifier: ProfileCell.identifier)
        return tableView
    }()

    private lazy var userInfoView = UserInfoView()

    internal var presenter: ProfilePresenterInputs!

    // MARK: - Lifecycle
    override func viewDidLoad() {
        super.viewDidLoad()
        presenter.viewDidLoad()
    }
}

// MARK: - Profile View Protocol
extension ProfileViewController: ProfileViewProtocol {

    func setNavTitle(title: String) {
        self.title = title
    }

    func setBackgroundColor() {
        self.view.backgroundColor = .systemBackground
    }

    func prepareUserInfoView() {
        view.addSubview(userInfoView)

        userInfoView.snp.makeConstraints { make in
            make.width.equalToSuperview()
            make.height.equalTo(280)
            make.top.equalTo(view.safeAreaLayoutGuide)
        }
    }

    func prepareTableView() {
        view.addSubview(profileTableView)

        profileTableView.snp.makeConstraints { make in
            make.top.equalTo(userInfoView.snp.bottom)
            make.left.right.bottom.equalToSuperview()
        }
    }

    func startLoading() {
        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    }

    func endLoading() {
        // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    }

    func onError(message: String) {
        showAlert(title: "", message: message)
    }

    func showCurrentUserInfo(model: CurrentUserModel?) {
        userInfoView.showModel(model: model)
    }
}

// MARK: - Profile TableView Delegate & DataSource
extension ProfileViewController: UITableViewDelegate, UITableViewDataSource {

    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return presenter.numberOfRowsInSection()
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        guard let cell = profileTableView.dequeueReusableCell(
            withIdentifier: ProfileCell.identifier,
            for: indexPath
        ) as? ProfileCell else {
            return UITableViewCell()
        }
        cell.showModel(model: presenter.cellForRowAt(indexPath: indexPath))
        cell.selectionStyle = .none
        cell.accessoryType = .disclosureIndicator
        return cell
    }

    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
        return presenter.heightForRowAt(indexPath: indexPath)
    }

    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        profileTableView.deselectRow(at: indexPath, animated: true)
        presenter.didSelectRowAt(indexPath: indexPath)
    }
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Ä–∞–Ω–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Navigation Bar: "My Profile"                                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                   UserInfoView (280pt)                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ   [Profile      ‚îÇ                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ    Photo]       ‚îÇ   140x140                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ   cornerRadius  ‚îÇ   borderWidth: 3         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ      70         ‚îÇ                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                 user@email.com                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              (semibold, size 20)                          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  ProfileTableView                                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  üó∫Ô∏è  Address Information                        >   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  üí≥  Payment Information                        >   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  üì¶  Order History                              >   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  üîå  Sign Out                                   >   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 20.4 UI Components

### UserInfoView ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

```swift
// Modules/Profile/UIComponents/CustomViews/UserInfoView.swift
import Foundation
import UIKit.UIView
import SDWebImage

final class UserInfoView: UIView {

    private lazy var profilePhotoImageView: UIImageView = {
        let imageView = UIImageView()
        imageView.contentMode = .scaleAspectFit
        imageView.layer.borderWidth = 3
        imageView.layer.borderColor = UIColor.label.cgColor
        imageView.layer.cornerRadius = 70
        imageView.clipsToBounds = true
        return imageView
    }()

    private lazy var emailLabel: UILabel = {
        let label = UILabel()
        label.textColor = .label
        label.font = .systemFont(ofSize: 20, weight: .semibold)
        label.textAlignment = .center
        return label
    }()

    private lazy var vStackView: VerticalStackView = {
        let stackView = VerticalStackView(
            arrangedSubviews: [profilePhotoImageView, emailLabel],
            spacing: 48
        )
        stackView.alignment = .center
        return stackView
    }()

    override init(frame: CGRect) {
        super.init(frame: frame)
        setUpConstraints()
    }

    required init?(coder: NSCoder) {
        super.init(coder: coder)
        fatalError("init(coder:) has not been implemented")
    }

    private func setUpConstraints() {
        addSubview(vStackView)

        profilePhotoImageView.snp.makeConstraints { make in
            make.width.height.equalTo(140)
        }

        emailLabel.snp.makeConstraints { make in
            make.width.equalToSuperview().offset(44)
        }

        vStackView.snp.makeConstraints { make in
            make.centerX.centerY.equalToSuperview()
        }
    }

    func showModel(model: CurrentUserModel?) {
        profilePhotoImageView.sd_setImage(
            with: URL(string: model?.profileImageURLString ?? "https://picsum.photos/seed/picsum/500/500")
        )
        emailLabel.text = model?.userEmail ?? ""
    }
}
```

**–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      UserInfoView Layout                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ   VerticalStackView (centered)                                  ‚îÇ
‚îÇ   spacing: 48                                                   ‚îÇ
‚îÇ   alignment: .center                                            ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ              profilePhotoImageView                       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ                   ‚îÇ  width: 140           ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ    [Photo/       ‚îÇ  height: 140          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ     Placeholder]  ‚îÇ  cornerRadius: 70     ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ                   ‚îÇ  borderWidth: 3       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ                   ‚îÇ  borderColor: .label  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              spacing: 48pt                               ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              emailLabel                                  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              user@example.com                            ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              font: semibold 20                           ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ              textAlignment: .center                      ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   SDWebImage –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:                        ‚îÇ
‚îÇ   ‚Ä¢ –ö—ç—à–∏—Ä—É–µ—Ç –≤ –ø–∞–º—è—Ç–∏ –∏ –Ω–∞ –¥–∏—Å–∫–µ                               ‚îÇ
‚îÇ   ‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç placeholder –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ                        ‚îÇ
‚îÇ   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç picsum.photos –∫–∞–∫ fallback                      ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ProfileCell ‚Äî —è—á–µ–π–∫–∞ –º–µ–Ω—é

```swift
// Modules/Profile/UIComponents/Cells/ProfileCell.swift
import UIKit

final class ProfileCell: UITableViewCell {

    static let identifier = "ProfileCell"

    private lazy var symbolImageView: UIImageView = {
        let imageView = UIImageView()
        imageView.tintColor = .label
        return imageView
    }()

    private lazy var titleLabel: UILabel = {
        let label = UILabel()
        return label
    }()

    private lazy var hStackView: UIStackView = {
        let stackView = UIStackView(arrangedSubviews: [symbolImageView, titleLabel])
        stackView.axis = .horizontal
        stackView.alignment = .center
        stackView.spacing = 8
        return stackView
    }()

    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        setUpConstraints()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setUpConstraints() {
        addSubview(hStackView)

        symbolImageView.snp.makeConstraints { make in
            make.width.height.equalTo(36)
        }

        hStackView.snp.makeConstraints { make in
            make.left.equalToSuperview().offset(20)
            make.top.right.bottom.equalToSuperview()
        }
    }

    func showModel(model: ProfileRowItemModel?) {
        symbolImageView.image = model?.item.image
        titleLabel.text = model?.item.title
    }
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —è—á–µ–π–∫–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       ProfileCell (60pt height)                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  HStackView                                                 ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  left: 20, spacing: 8                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Symbol  ‚îÇ  ‚îÇ  Title Label                 ‚îÇ  ‚îÇ   >   ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  36x36   ‚îÇ  ‚îÇ  "Address Information"       ‚îÇ  ‚îÇ       ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   üó∫Ô∏è    ‚îÇ  ‚îÇ                              ‚îÇ  ‚îÇ       ‚îÇ  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                 accessory   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 20.5 Addresses Module ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏

### AddressesRouter

```swift
// Modules/Addresses/Base/AddressesRouter.swift
import Foundation
import UIKit.UIViewController

protocol AddressesRouterProtocol {
    func toAddAddress(address: AddressModel?)
}

final class AddressesRouter {

    private weak var view: UIViewController?

    init(view: UIViewController) {
        self.view = view
    }

    static func startAddressesModule() -> UIViewController {
        let view = AddressesViewController()
        let router = AddressesRouter(view: view)
        let interactor = AddressesInteractor(
            storageManager: RealmManager.shared,
            userInfoManager: UserInfoManager()
        )
        let presenter = AddressesPresenter(view: view, interactor: interactor, router: router)

        view.presenter = presenter
        interactor.presenter = presenter

        return view
    }
}

extension AddressesRouter: AddressesRouterProtocol {

    func toAddAddress(address: AddressModel?) {
        let addController = AddAddressViewController(address: address)
        self.view?.navigationController?.pushViewController(addController, animated: true)
    }
}
```

### AddressesInteractor

```swift
// Modules/Addresses/Base/AddressesInteractor.swift
import Foundation

protocol AddressesInteractorInputs {
    func getAddresses()
    func showAddresses() -> [AddressModel]?
    func addAction(model: [String: Any])
    func updateAction(model: [String: Any])
    func deleteAction(model: AddressModel?)
}

protocol AddressesInteractorOutputs: AnyObject {
    func dataRefreshed()
    func onError(error: RealmError)
}

final class AddressesInteractor {

    weak var presenter: AddressesInteractorOutputs?
    private let storageManager: RealmManagerProtocol?
    private let userInfoManager: UserInfoManagerProtocol?

    private var addresses: [AddressModel]? {
        didSet {
            presenter?.dataRefreshed()
        }
    }

    init(storageManager: RealmManagerProtocol?, userInfoManager: UserInfoManagerProtocol) {
        self.storageManager = storageManager
        self.userInfoManager = userInfoManager
    }
}

// MARK: Interactor Inputs
extension AddressesInteractor: AddressesInteractorInputs {

    func getAddresses() {
        self.addresses = storageManager?.getAll(AddressModel.self)
            .filter { $0.userId == userInfoManager?.getUserUid() }
    }

    func showAddresses() -> [AddressModel]? {
        return self.addresses
    }

    func addAction(model: [String: Any]) {
        let address = AddressModel(
            userId: (model["userId"] as! String),
            uuid: (model["uuid"] as! UUID),
            name: model["name"] as! String,
            country: model["country"] as! String,
            city: model["city"] as! String,
            street: model["street"] as! String,
            buildingNumber: model["buildingNumber"] as! Int,
            zipCode: model["zipCode"] as! Int
        )
        storageManager?.create(address, onError: { [weak self] error in
            guard let self else { return }
            presenter?.onError(error: error)
        })
        presenter?.dataRefreshed()
    }

    func updateAction(model: [String: Any]) {
        guard let savedAddress = self.addresses?
            .filter({ $0.uuid == (model["uuid"] as! UUID) }).first
        else { return }

        storageManager?.update(savedAddress, with: model, onError: { [weak self] error in
            guard let self else { return }
            self.presenter?.onError(error: error)
        })
        self.presenter?.dataRefreshed()
    }

    func deleteAction(model: AddressModel?) {
        if let model {
            if let index = self.addresses?.firstIndex(where: { $0.uuid == model.uuid }) {
                storageManager?.delete(model, onError: { [weak self] error in
                    guard let self else { return }
                    self.presenter?.onError(error: error)
                })
                self.addresses?.remove(at: index)
            }
        }
    }
}
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ userId:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Address Filtering by User                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ   Realm Database                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  AddressModel Objects                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ userId: "user1", name: "Home", city: "Moscow"       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ userId: "user1", name: "Work", city: "SPb"          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ userId: "user2", name: "Office", city: "Kazan"      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ userId: "user1", name: "Parents", city: "Sochi"     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                           ‚îÇ                                      ‚îÇ
‚îÇ                           ‚Üì                                      ‚îÇ
‚îÇ   .filter { $0.userId == currentUserId }                        ‚îÇ
‚îÇ                           ‚îÇ                                      ‚îÇ
‚îÇ                           ‚Üì                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Filtered (user1 only)                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ name: "Home", city: "Moscow"                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ name: "Work", city: "SPb"                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ name: "Parents", city: "Sochi"                      ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ   –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∞–¥—Ä–µ—Å–∞!                 ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### AddressesPresenter

```swift
// Modules/Addresses/Base/AddressesPresenter.swift
import Foundation

protocol AddressesPresenterInputs {
    func viewDidLoad()
    func viewWillAppear()
    func numberOfItemsInSection(section: Int) -> Int
    func cellForItemAt(indexPath: IndexPath) -> AddressModel?
    func sizeForItemAt(indexPath: IndexPath) -> CGSize
    func didSelectItemAt(indexPath: IndexPath)
    func toAddButtonTapped()
    func trashTapped(model: AddressModel?)
    func plusButtonTapped()
}

final class AddressesPresenter {

    private weak var view: AddressesViewProtocol?
    private let interactor: AddressesInteractorInputs?
    private let router: AddressesRouterProtocol?

    init(view: AddressesViewProtocol, interactor: AddressesInteractorInputs, router: AddressesRouterProtocol) {
        self.view = view
        self.router = router
        self.interactor = interactor

        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(self.notificationReceived(_:)),
            name: .addUpdateButtonNotification,
            object: nil
        )
    }

    deinit {
        NotificationCenter.default.removeObserver(self, name: .addUpdateButtonNotification, object: nil)
    }
}

extension AddressesPresenter: AddressesPresenterInputs {

    func viewDidLoad() {
        view?.setViewBackgroundColor(color: .systemBackground)
        view?.setNavBarTitle(title: "My Addresses")
        view?.prepareCollectionView()
        view?.prepareEmptyView()
        view?.preparePlusButton()
    }

    func viewWillAppear() {
        interactor?.getAddresses()
    }

    func numberOfItemsInSection(section: Int) -> Int {
        return interactor?.showAddresses()?.count ?? 0
    }

    func cellForItemAt(indexPath: IndexPath) -> AddressModel? {
        return interactor?.showAddresses()?[indexPath.item]
    }

    func sizeForItemAt(indexPath: IndexPath) -> CGSize {
        return .init(width: UIScreenBounds.width - 32, height: 180)
    }

    func didSelectItemAt(indexPath: IndexPath) {
        let selectedAddress = interactor?.showAddresses()?[indexPath.item]
        router?.toAddAddress(address: selectedAddress) // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    }

    func toAddButtonTapped() {
        router?.toAddAddress(address: nil) // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ
    }

    func plusButtonTapped() {
        router?.toAddAddress(address: nil)
    }

    @objc func notificationReceived(_ notification: Notification) {
        guard let newInfos = notification.userInfo?["address"] else { return }
        guard let action = notification.userInfo?["action"] else { return }

        if action as! String == "add" {
            interactor?.addAction(model: newInfos as! [String: Any])
        } else {
            interactor?.updateAction(model: newInfos as! [String: Any])
        }
    }

    func trashTapped(model: AddressModel?) {
        interactor?.deleteAction(model: model)
    }
}

extension AddressesPresenter: AddressesInteractorOutputs {

    func dataRefreshed() {
        view?.dataRefreshed()
    }

    func onError(error: RealmError) {
        view?.onError(message: error.localizedDescription)
    }
}
```

**NotificationCenter –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 NotificationCenter Communication                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   AddAddressViewController                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ  addUpdateButtonTapped()                                       ‚îÇ ‚îÇ
‚îÇ   ‚îÇ       ‚îÇ                                                        ‚îÇ ‚îÇ
‚îÇ   ‚îÇ       ‚Üì                                                        ‚îÇ ‚îÇ
‚îÇ   ‚îÇ  let userInfo = ["address": newInfos, "action": "add/update"]  ‚îÇ ‚îÇ
‚îÇ   ‚îÇ       ‚îÇ                                                        ‚îÇ ‚îÇ
‚îÇ   ‚îÇ       ‚Üì                                                        ‚îÇ ‚îÇ
‚îÇ   ‚îÇ  NotificationCenter.post(name: .addUpdateButtonNotification,   ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                          object: nil,                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                          userInfo: userInfo)                   ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                           ‚îÇ                                          ‚îÇ
‚îÇ                           ‚îÇ Broadcast                                ‚îÇ
‚îÇ                           ‚Üì                                          ‚îÇ
‚îÇ   AddressesPresenter                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ  notificationReceived(_ notification)                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ       ‚îÇ                                                        ‚îÇ ‚îÇ
‚îÇ   ‚îÇ       ‚Üì                                                        ‚îÇ ‚îÇ
‚îÇ   ‚îÇ  if action == "add":                                           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ      interactor?.addAction(model: newInfos)                    ‚îÇ ‚îÇ
‚îÇ   ‚îÇ  else:                                                         ‚îÇ ‚îÇ
‚îÇ   ‚îÇ      interactor?.updateAction(model: newInfos)                 ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: AddAddressVC –Ω–µ –∑–Ω–∞–µ—Ç –æ Presenter                   ‚îÇ
‚îÇ   –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫: —Å–ª–∞–±–∞—è —Å–≤—è–∑—å –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É                  ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### AddressesViewController

```swift
// Modules/Addresses/Base/AddressesViewController.swift
import UIKit

protocol AddressesViewProtocol: AnyObject {
    func setViewBackgroundColor(color: UIColor)
    func setNavBarTitle(title: String)
    func prepareCollectionView()
    func prepareEmptyView()
    func preparePlusButton()
    func dataRefreshed()
    func onError(message: String)
}

final class AddressesViewController: UIViewController {

    private lazy var addressesCollectionView: UICollectionView = {
        let layout = UICollectionViewFlowLayout()
        let collectionView = UICollectionView(frame: .zero, collectionViewLayout: layout)
        collectionView.delegate = self
        collectionView.dataSource = self
        collectionView.register(AddressCell.self, forCellWithReuseIdentifier: AddressCell.identifier)
        return collectionView
    }()

    private lazy var emptyView = EmptyAddressesView()

    internal var presenter: AddressesPresenterInputs!

    // MARK: - Lifecycle
    override func viewDidLoad() {
        super.viewDidLoad()
        presenter.viewDidLoad()
    }

    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        presenter.viewWillAppear()
    }

    // MARK: - Actions
    @objc private func plusButtonTapped() {
        presenter.plusButtonTapped()
    }
}

// MARK: - View protocol
extension AddressesViewController: AddressesViewProtocol {

    func setViewBackgroundColor(color: UIColor) {
        self.view.backgroundColor = color
    }

    func setNavBarTitle(title: String) {
        self.title = title
    }

    func prepareCollectionView() {
        view.addSubview(addressesCollectionView)
        addressesCollectionView.backgroundColor = .systemGray6

        addressesCollectionView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }
    }

    func prepareEmptyView() {
        view.addSubview(emptyView)
        emptyView.delegate = self

        emptyView.snp.makeConstraints { make in
            make.centerX.centerY.equalToSuperview()
        }
    }

    func preparePlusButton() {
        self.navigationItem.rightBarButtonItem = UIBarButtonItem(
            barButtonSystemItem: .add,
            target: self,
            action: #selector(plusButtonTapped)
        )
    }

    func dataRefreshed() {
        self.addressesCollectionView.reloadData()
    }

    func onError(message: String) {
        self.showAlert(title: "", message: message)
    }
}

// MARK: - EmptyAddressView button delegate
extension AddressesViewController: EmptyAddressesViewButtonDelegate {
    func toAddButtonTapped() {
        presenter.toAddButtonTapped()
    }
}

extension AddressesViewController: AddressCellTrashButtonDelegate {
    func trashTapped(model: AddressModel?) {
        presenter.trashTapped(model: model)
    }
}

// MARK: CollectionView Delegate & DataSource
extension AddressesViewController: UICollectionViewDelegate, UICollectionViewDataSource, UICollectionViewDelegateFlowLayout {

    func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int {
        emptyView.isHidden = (presenter.numberOfItemsInSection(section: section) == 0) ? false : true
        return presenter.numberOfItemsInSection(section: section)
    }

    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
        guard let cell = addressesCollectionView.dequeueReusableCell(
            withReuseIdentifier: AddressCell.identifier,
            for: indexPath
        ) as? AddressCell else {
            return UICollectionViewCell()
        }

        cell.showModel(model: presenter.cellForItemAt(indexPath: indexPath))
        cell.delegate = self
        cell.layer.borderWidth = 1
        cell.layer.borderColor = UIColor.label.cgColor
        cell.layer.cornerRadius = 8
        cell.backgroundColor = .systemBackground

        return cell
    }

    func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {
        return presenter.sizeForItemAt(indexPath: indexPath)
    }

    func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
        addressesCollectionView.deselectItem(at: indexPath, animated: true)
        presenter.didSelectItemAt(indexPath: indexPath)
    }
}
```

### AddressCell

```swift
// Modules/Addresses/UIComponents/Cells/AddressCell.swift
import UIKit

protocol AddressCellTrashButtonDelegate: AnyObject {
    func trashTapped(model: AddressModel?)
}

final class AddressCell: UICollectionViewCell {

    static let identifier = "AddressCell"

    private lazy var addressNameLabel: PaddingLabel = {
        let label = PaddingLabel(withInsets: 4, 4, 4, 4)
        label.textColor = .label
        label.font = .boldSystemFont(ofSize: 16)
        label.layer.borderWidth = 1
        label.layer.borderColor = UIColor.gray.cgColor
        label.layer.cornerRadius = 4
        return label
    }()

    private lazy var addressCityAndCountryLabel: UILabel = {
        let label = UILabel()
        label.textColor = .label
        return label
    }()

    private lazy var addressLabel: UILabel = {
        let label = UILabel()
        label.textColor = .label
        label.numberOfLines = 0
        return label
    }()

    private lazy var trashButton: UIButton = {
        let button = UIButton()
        button.setImage(
            UIImage(systemName: "trash", withConfiguration: UIImage.SymbolConfiguration(pointSize: 18)),
            for: .normal
        )
        button.tintColor = .systemRed
        button.addTarget(self, action: #selector(trashButtonTapped), for: .touchUpInside)
        return button
    }()

    private lazy var arrowImageView: UIImageView = {
        let image = UIImage(systemName: "arrow.right", withConfiguration: UIImage.SymbolConfiguration(pointSize: 12))
        let imageView = UIImageView()
        imageView.image = image
        imageView.tintColor = .label
        return imageView
    }()

    private lazy var VStackView: VerticalStackView = {
        let stackView = VerticalStackView(
            arrangedSubviews: [addressNameLabel, addressCityAndCountryLabel, addressLabel],
            spacing: 26
        )
        stackView.alignment = .leading
        return stackView
    }()

    private var model: AddressModel?
    weak var delegate: AddressCellTrashButtonDelegate?

    override init(frame: CGRect) {
        super.init(frame: frame)
        setUpConstraints()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setUpConstraints() {
        addSubview(VStackView)
        addSubview(arrowImageView)
        contentView.addSubview(trashButton)

        arrowImageView.snp.makeConstraints { make in
            make.centerY.equalTo(contentView.snp.centerY)
            make.right.equalTo(contentView.snp.right).inset(16)
        }

        trashButton.snp.makeConstraints { make in
            make.centerX.equalTo(arrowImageView)
            make.top.equalToSuperview().offset(14)
        }

        VStackView.snp.makeConstraints { make in
            make.edges.equalToSuperview().inset(16)
        }
    }

    @objc private func trashButtonTapped() {
        delegate?.trashTapped(model: self.model)
    }

    func showModel(model: AddressModel?) {
        self.model = model
        addressNameLabel.text = model?.name ?? ""
        addressCityAndCountryLabel.text = "\(model?.city ?? ""), \(model?.country ?? "")"
        addressLabel.text = "\(model?.street ?? ""), No: \(model?.buildingNumber ?? 0), ZIP: \(model?.zipCode ?? 0)"
    }
}
```

**–í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —è—á–µ–π–∫–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    AddressCell (180pt height)                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  üóëÔ∏è    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                          ‚îÇ  trash  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Home    ‚îÇ  addressNameLabel (with border)          ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                          ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ                                                        ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  Moscow, Russia                                        ‚îÇ    ‚Üí    ‚îÇ
‚îÇ  ‚îÇ  addressCityAndCountryLabel                            ‚îÇ  arrow  ‚îÇ
‚îÇ  ‚îÇ                                                        ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  Lenina Street, No: 15, ZIP: 123456                   ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  addressLabel (numberOfLines: 0)                       ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  VStackView (spacing: 26, inset: 16)                                ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### EmptyAddressesView

```swift
// Modules/Addresses/UIComponents/CustomViews/EmptyAddressesView.swift
import UIKit

protocol EmptyAddressesViewButtonDelegate: AnyObject {
    func toAddButtonTapped()
}

final class EmptyAddressesView: UIView {

    private lazy var infoLabel: UILabel = {
        let label = UILabel()
        label.tintColor = .label
        label.text = "You haven't added addresses yet!"
        label.font = .systemFont(ofSize: 20, weight: .thin)
        return label
    }()

    private lazy var toAddButton: UIButton = {
        let button = UIButton()
        button.setTitleColor(.systemBackground, for: .normal)
        button.setTitle("+ Add Address", for: .normal)
        button.backgroundColor = .label
        button.layer.cornerRadius = 8
        button.clipsToBounds = true
        button.titleEdgeInsets = .init(top: 8, left: 8, bottom: 8, right: 8)
        button.addTarget(self, action: #selector(toAddButtonTapped), for: .touchUpInside)
        return button
    }()

    private lazy var VStackView: VerticalStackView = {
        let stackView = VerticalStackView(arrangedSubviews: [infoLabel, toAddButton], spacing: 16)
        stackView.alignment = .center
        return stackView
    }()

    weak var delegate: EmptyAddressesViewButtonDelegate?

    override init(frame: CGRect) {
        super.init(frame: frame)
        setConstraints()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setConstraints() {
        addSubview(VStackView)

        toAddButton.snp.makeConstraints { make in
            make.width.equalTo(148)
            make.height.equalTo(40)
        }

        VStackView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }
    }

    @objc private func toAddButtonTapped(_ sender: UIButton) {
        delegate?.toAddButtonTapped()
    }
}
```

### AddAddressViewController ‚Äî —Ñ–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

```swift
// Modules/Addresses/AddAddress/AddAddressViewController.swift
import UIKit

extension Notification.Name {
    static let addUpdateButtonNotification = Notification.Name(rawValue: "AddUpdateButtonNotification")
}

final class AddAddressViewController: UIViewController {

    @IBOutlet private weak var nameTextField: UITextField!
    @IBOutlet private weak var countryTextField: UITextField!
    @IBOutlet private weak var cityTextField: UITextField!
    @IBOutlet private weak var streetTextField: UITextField!
    @IBOutlet private weak var buildingNoTextField: UITextField!
    @IBOutlet private weak var zipCodeTextField: UITextField!
    @IBOutlet private weak var addUpdateButton: UIButton!

    private lazy var pickerView = UIPickerView()

    private let service: CountriesServiceProtocol = CountriesService()
    private let userInfoManager: UserInfoManagerProtocol = UserInfoManager()

    private var address: AddressModel?
    private var countries: [Country] = []

    private let notificationCenter: NotificationCenter = NotificationCenter.default

    init(address: AddressModel?) {
        self.address = address
        super.init(nibName: "AddAddressView", bundle: nil)
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        setupRequirements()
        getCountries()
    }

    override func viewWillAppear(_ animated: Bool) {
        setupWithModel()
    }

    private func setupRequirements() {
        pickerView.delegate = self
        pickerView.dataSource = self
        countryTextField.inputView = pickerView
    }

    private func setupWithModel() {
        if address != nil {
            nameTextField.text = address?.name
            countryTextField.text = address?.country
            cityTextField.text = address?.city
            streetTextField.text = address?.street
            buildingNoTextField.text = String(address?.buildingNumber ?? 0)
            zipCodeTextField.text = String(address?.zipCode ?? 0)
            addUpdateButton.setTitle("Update", for: .normal)
        }
    }

    @IBAction private func addUpdateButtonTapped(_ sender: Any) {
        defer {
            self.navigationController?.popViewController(animated: true)
        }

        if let name = nameTextField.text,
           let country = countryTextField.text,
           let city = cityTextField.text,
           let street = streetTextField.text,
           let buildingNo = buildingNoTextField.text,
           let zipCode = zipCodeTextField.text,
           !name.isEmpty,
           !country.isEmpty,
           !city.isEmpty,
           !street.isEmpty,
           !buildingNo.isEmpty,
           !zipCode.isEmpty {

            let newInfos: [String: AnyHashable] = [
                "userId": userInfoManager.getUserUid(),
                "uuid": self.address?.uuid ?? UUID(),
                "name": name,
                "country": country,
                "city": city,
                "street": street,
                "buildingNumber": Int(buildingNo),
                "zipCode": Int(zipCode)
            ]

            let action = addUpdateButton.titleLabel?.text == "Add" ? "add" : "update"
            let userInfoForNC: [String: Any] = ["address": newInfos, "action": action]
            notificationCenter.post(name: .addUpdateButtonNotification, object: nil, userInfo: userInfoForNC)
        } else {
            self.showAlert(title: "", message: GeneralError.addressInfoMissing.localizedDescription)
        }
    }

    private func getCountries() {
        Task {
            try await service.getAllCountries { [weak self] result in
                guard let self else { return }

                switch result {
                case .success(let countries):
                    DispatchQueue.main.async { [weak self] in
                        self?.countries = countries.sorted()
                        self?.pickerView.reloadAllComponents()
                    }
                case .failure(let error):
                    print(error.localizedDescription)
                }
            }
        }
    }
}

// MARK: - PickerViewDelegate
extension AddAddressViewController: UIPickerViewDelegate, UIPickerViewDataSource {

    func numberOfComponents(in pickerView: UIPickerView) -> Int {
        return 1
    }

    func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
        return countries.count
    }

    func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String? {
        return countries[row].name.common
    }

    func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int) {
        countryTextField.text = countries[row].name.common
    }
}
```

**UIPickerView –∫–∞–∫ inputView:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           UIPickerView as TextField InputView                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   countryTextField.inputView = pickerView                            ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ countryTextField:                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   [ Name:     Home                                    ]      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   [ Country:  Russia                                  ] ‚Üêtap ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   [ City:     _____                                   ]      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                              ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                           ‚îÇ                                          ‚îÇ
‚îÇ                           ‚Üì                                          ‚îÇ
‚îÇ   –í–º–µ—Å—Ç–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ—è–≤–ª—è–µ—Ç—Å—è:                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                 Afghanistan                          ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                 Albania                              ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Russia ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê (selected)   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                 Rwanda                               ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                 Saudi Arabia                         ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                    UIPickerView                              ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   didSelectRow ‚Üí countryTextField.text = countries[row].name.common  ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 20.6 PaymentInfo Module ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∞–º–∏

### PaymentInfoRouter

```swift
// Modules/PaymentInfo/Base/PaymentInfoRouter.swift
import Foundation
import UIKit.UIViewController

protocol PaymentInfoRouterProtocol {
    func toAddCard(card: CardModel?)
}

final class PaymentInfoRouter {

    private weak var view: UIViewController?

    init(view: UIViewController?) {
        self.view = view
    }

    static func startPaymentInfoModule() -> UIViewController {
        let view = PaymentInfoViewController()
        let router = PaymentInfoRouter(view: view)
        let interactor = PaymentInfoInteractor(
            storageManager: RealmManager.shared,
            userInfoManager: UserInfoManager()
        )
        let presenter = PaymentInfoPresenter(view: view, router: router, interactor: interactor)

        view.presenter = presenter
        interactor.presenter = presenter

        return view
    }
}

extension PaymentInfoRouter: PaymentInfoRouterProtocol {

    func toAddCard(card: CardModel?) {
        let addCardViewController = AddCardViewController(card: card)
        self.view?.navigationController?.pushViewController(addCardViewController, animated: true)
    }
}
```

### PaymentInfoInteractor

```swift
// Modules/PaymentInfo/Base/PaymentInfoInteractor.swift
import Foundation

protocol PaymentInfoInteractorInputs {
    func getCards()
    func showCards() -> [CardModel]?
    func addAction(model: [String: Any])
    func updateAction(model: [String: Any])
    func deleteAction(model: CardModel?)
}

protocol PaymentInfoInteractorOutputs: AnyObject {
    func onError(error: RealmError)
    func dataRefreshed()
}

final class PaymentInfoInteractor {

    weak var presenter: PaymentInfoInteractorOutputs!
    private let storageManager: RealmManagerProtocol?
    private let userInfoManager: UserInfoManagerProtocol?

    private var cards: [CardModel]?

    init(storageManager: RealmManagerProtocol, userInfoManager: UserInfoManagerProtocol) {
        self.storageManager = storageManager
        self.userInfoManager = userInfoManager
    }
}

extension PaymentInfoInteractor: PaymentInfoInteractorInputs {

    func getCards() {
        self.cards = storageManager?.getAll(CardModel.self)
            .filter { $0.userId == userInfoManager?.getUserUid() }
    }

    func showCards() -> [CardModel]? {
        return self.cards
    }

    func addAction(model: [String : Any]) {
        let card = CardModel(
            userId: model["userId"] as! String,
            uuid: model["uuid"] as! String,
            nameSurname: model["nameSurname"] as! String,
            cardName: model["cardName"] as! String,
            cardNumber: model["cardNumber"] as! String,
            month: model["month"] as! String,
            year: model["year"] as! String,
            cvv: model["cvv"] as! String
        )

        storageManager?.create(card) { [weak self] error in
            guard let self else { return }
            self.presenter.onError(error: error)
        }
        presenter?.dataRefreshed()
    }

    func updateAction(model: [String : Any]) {
        guard let savedCard = self.cards?
            .filter({ $0.uuid == (model["uuid"] as! String) }).first
        else { return }

        storageManager?.update(savedCard, with: model, onError: { [weak self] error in
            guard let self else { return }
            self.presenter?.onError(error: error)
        })
        self.presenter?.dataRefreshed()
    }

    func deleteAction(model: CardModel?) {
        if let model {
            if let index = self.cards?.firstIndex(where: { $0.uuid == model.uuid }) {
                storageManager?.delete(model, onError: { [weak self] error in
                    guard let self else { return }
                    self.presenter?.onError(error: error)
                })
                self.cards?.remove(at: index)
                self.presenter.dataRefreshed()
            }
        }
    }
}
```

### PaymentInfoPresenter

```swift
// Modules/PaymentInfo/Base/PaymentInfoPresenter.swift
import Foundation

protocol PaymentInfoPresenterInputs {
    func viewDidLoad()
    func viewWillAppear()
    func plusButtonTapped()
    func numberOfItemsInSection(section: Int) -> Int
    func cellForItemAt(indexPath: IndexPath) -> CardModel?
    func sizeForItemAt(indexPath: IndexPath) -> CGSize
    func didSelectItemAt(indexPath: IndexPath)
    func trashTapped(model: CardModel?)
    func toAddButtonTapped()
}

final class PaymentInfoPresenter {

    private weak var view: PaymentInfoViewProtocol?
    private let router: PaymentInfoRouterProtocol?
    private let interactor: PaymentInfoInteractorInputs?

    init(view: PaymentInfoViewProtocol, router: PaymentInfoRouterProtocol, interactor: PaymentInfoInteractorInputs) {
        self.view = view
        self.router = router
        self.interactor = interactor

        NotificationCenter.default.addObserver(
            self,
            selector: #selector(self.notificationReceived(_:)),
            name: .cardAddButtonNotification,
            object: nil
        )
    }
}

extension PaymentInfoPresenter: PaymentInfoPresenterInputs {

    func viewDidLoad() {
        view?.setNavTitle(title: "My Cards")
        view?.setBackgrodunColor(color: .systemBackground)
        view?.prepareCollectionView()
        view?.prepareEmptyCardView()
        view?.preparePlusButton()
    }

    func viewWillAppear() {
        interactor?.getCards()
    }

    func plusButtonTapped() {
        router?.toAddCard(card: nil)
    }

    func numberOfItemsInSection(section: Int) -> Int {
        return interactor?.showCards()?.count ?? 0
    }

    func cellForItemAt(indexPath: IndexPath) -> CardModel? {
        return interactor?.showCards()?[indexPath.item]
    }

    func sizeForItemAt(indexPath: IndexPath) -> CGSize {
        return .init(width: UIScreenBounds.width - 32, height: 100)
    }

    func didSelectItemAt(indexPath: IndexPath) {
        let selectedCard = interactor?.showCards()?[indexPath.item]
        router?.toAddCard(card: selectedCard)
    }

    @objc func notificationReceived(_ notification: Notification) {
        guard let cardInfos = notification.userInfo?["card"] else { return }
        guard let action = notification.userInfo?["action"] else { return }

        if action as! String == "add" {
            interactor?.addAction(model: cardInfos as! [String: Any])
        } else {
            interactor?.updateAction(model: cardInfos as! [String: Any])
        }
    }

    func trashTapped(model: CardModel?) {
        interactor?.deleteAction(model: model)
    }

    func toAddButtonTapped() {
        router?.toAddCard(card: nil)
    }
}

extension PaymentInfoPresenter: PaymentInfoInteractorOutputs {

    func onError(error: RealmError) {
        view?.onError(message: error.localizedDescription)
    }

    func dataRefreshed() {
        view?.dataRefreshed()
    }
}
```

### PaymentInfoViewController

```swift
// Modules/PaymentInfo/Base/PaymentInfoViewController.swift
import UIKit

protocol PaymentInfoViewProtocol: AnyObject {
    func setNavTitle(title: String)
    func setBackgrodunColor(color: UIColor)
    func preparePlusButton()
    func prepareCollectionView()
    func prepareEmptyCardView()
    func onError(message: String)
    func dataRefreshed()
}

final class PaymentInfoViewController: UIViewController {

    private lazy var paymentCollectionView: UICollectionView = {
        let layout = UICollectionViewFlowLayout()
        let collectionView = UICollectionView(frame: .zero, collectionViewLayout: layout)
        collectionView.delegate = self
        collectionView.dataSource = self
        collectionView.register(CardCell.self, forCellWithReuseIdentifier: CardCell.identifier)
        return collectionView
    }()

    private lazy var emptyCardView = EmptyCardView()

    internal var presenter: PaymentInfoPresenterInputs!

    // MARK: - Lifecycle
    override func viewDidLoad() {
        super.viewDidLoad()
        presenter.viewDidLoad()
    }

    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        presenter.viewWillAppear()
    }

    // MARK: - Actions
    @objc private func plusButtonTapped() {
        presenter.plusButtonTapped()
    }
}

// MARK: - View protocols
extension PaymentInfoViewController: PaymentInfoViewProtocol {

    func setNavTitle(title: String) {
        self.title = title
    }

    func setBackgrodunColor(color: UIColor) {
        self.view.backgroundColor = color
    }

    func preparePlusButton() {
        self.navigationItem.rightBarButtonItem = UIBarButtonItem(
            barButtonSystemItem: .add,
            target: self,
            action: #selector(plusButtonTapped)
        )
    }

    func prepareEmptyCardView() {
        view.addSubview(emptyCardView)
        emptyCardView.delegate = self

        emptyCardView.snp.makeConstraints { make in
            make.centerX.centerY.equalToSuperview()
        }
    }

    func prepareCollectionView() {
        view.addSubview(paymentCollectionView)
        paymentCollectionView.backgroundColor = .systemGray6

        paymentCollectionView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }
    }

    func onError(message: String) {
        self.showAlert(title: "", message: message)
    }

    func dataRefreshed() {
        self.paymentCollectionView.reloadData()
    }
}

// MARK: - EmptyView Button Delegate
extension PaymentInfoViewController: EmptyCardViewButtonDelegate {
    func toAddButtonTapped() {
        presenter.toAddButtonTapped()
    }
}

// MARK: - Cell Button Delegate
extension PaymentInfoViewController: CardCellTrashButtonDelegate {
    func trashTapped(model: CardModel?) {
        presenter.trashTapped(model: model)
    }
}

// MARK: - UICollectionView Delegates & DataSource
extension PaymentInfoViewController: UICollectionViewDelegate, UICollectionViewDataSource, UICollectionViewDelegateFlowLayout {

    func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int {
        emptyCardView.isHidden = (presenter.numberOfItemsInSection(section: section) == 0) ? false : true
        return presenter.numberOfItemsInSection(section: section)
    }

    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
        guard let cell = paymentCollectionView.dequeueReusableCell(
            withReuseIdentifier: CardCell.identifier,
            for: indexPath
        ) as? CardCell else {
            return UICollectionViewCell()
        }
        cell.layer.borderWidth = 1
        cell.layer.borderColor = UIColor.label.cgColor
        cell.layer.cornerRadius = 8
        cell.backgroundColor = .systemBackground
        cell.delegate = self
        cell.showModel(model: presenter.cellForItemAt(indexPath: indexPath))
        return cell
    }

    func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {
        return presenter.sizeForItemAt(indexPath: indexPath)
    }

    func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
        paymentCollectionView.deselectItem(at: indexPath, animated: true)
        presenter.didSelectItemAt(indexPath: indexPath)
    }
}
```

### CardCell

```swift
// Modules/PaymentInfo/UIComponents/Cells/CardCell.swift
import UIKit

protocol CardCellTrashButtonDelegate: AnyObject {
    func trashTapped(model: CardModel?)
}

class CardCell: UICollectionViewCell {

    static let identifier = "CardCell"

    private lazy var cardNameLabel: UILabel = {
        let label = UILabel()
        label.font = .systemFont(ofSize: 20, weight: .thin)
        return label
    }()

    private lazy var cardNumber: UILabel = {
        let label = UILabel()
        label.font = .systemFont(ofSize: 16)
        return label
    }()

    private lazy var trashButton: UIButton = {
        let button = UIButton()
        button.setImage(
            UIImage(systemName: "trash", withConfiguration: UIImage.SymbolConfiguration(pointSize: 18)),
            for: .normal
        )
        button.tintColor = .systemRed
        button.addTarget(self, action: #selector(trashButtonTapped), for: .touchUpInside)
        return button
    }()

    private lazy var vStackView: UIStackView = {
        let stackView = VerticalStackView(
            arrangedSubviews: [cardNameLabel, cardNumber],
            spacing: 16
        )
        stackView.alignment = .leading
        return stackView
    }()

    private var model: CardModel?
    weak var delegate: CardCellTrashButtonDelegate?

    override init(frame: CGRect) {
        super.init(frame: frame)
        setConstraints()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setConstraints() {
        addSubview(vStackView)
        contentView.addSubview(trashButton)

        trashButton.snp.makeConstraints { make in
            make.right.equalTo(contentView.snp.right).inset(16)
            make.top.equalToSuperview().offset(14)
        }

        vStackView.snp.makeConstraints { make in
            make.edges.equalToSuperview().inset(16)
        }
    }

    @objc private func trashButtonTapped() {
        delegate?.trashTapped(model: self.model)
    }

    func showModel(model: CardModel?) {
        self.model = model
        self.cardNameLabel.text = model?.cardName ?? ""
        self.cardNumber.text = model?.cardNumber
    }
}
```

---

## 20.7 OrderHistory Module ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

```swift
// Modules/OrderHistory/Controller/OrderHistoryViewController.swift
import UIKit
import FirebaseFirestore

final class OrderHistoryViewController: UIViewController {

    private lazy var ordersTableView: UITableView = {
        let tableView = UITableView()
        tableView.delegate = self
        tableView.dataSource = self
        tableView.register(OrderCell.self, forCellReuseIdentifier: OrderCell.identifier)
        tableView.rowHeight = UITableView.automaticDimension
        tableView.backgroundColor = .systemGray6
        return tableView
    }()

    private var orders: [OrderModel] = []

    private let userInfoManager: UserInfoManagerProtocol = UserInfoManager()

    override func viewDidLoad() {
        super.viewDidLoad()

        self.title = "Order History"
        setupConstraints()
        getOrders()
    }

    private func setupConstraints() {
        view.addSubview(ordersTableView)

        ordersTableView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }
    }

    private func getOrders() {
        if let userId = userInfoManager.getUserUid() {
            Firestore.firestore()
                .collection("Orders")
                .whereField("userId", isEqualTo: userId)
                .addSnapshotListener { [weak self] snapshot, error in
                    guard let self else { return }

                    if let error {
                        showAlert(title: "", message: error.localizedDescription)
                        return
                    } else {
                        guard let documents = snapshot?.documents else { return }
                        self.orders = []
                        for document in documents {
                            if let date = document.get("date") as? Timestamp,
                               let products = document.get("products") as? [String: Int],
                               let total = document.get("total") as? Double
                            {
                                let order = OrderModel(date: date, products: products, total: total)
                                self.orders.append(order)
                                self.ordersTableView.reloadData()
                            }
                        }
                    }
                }
        }
    }
}

extension OrderHistoryViewController: UITableViewDelegate, UITableViewDataSource {

    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return self.orders.count
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        guard let cell = ordersTableView.dequeueReusableCell(
            withIdentifier: OrderCell.identifier,
            for: indexPath
        ) as? OrderCell else {
            return UITableViewCell()
        }
        cell.showModel(order: self.orders[indexPath.row])
        cell.selectionStyle = .none
        cell.backgroundColor = .systemBackground
        return cell
    }
}

struct OrderModel {
    let date: Timestamp
    let products: [String: Int]
    let total: Double
}
```

**Firestore Query —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Firestore Order History Query                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   Firestore.firestore()                                              ‚îÇ
‚îÇ       .collection("Orders")                                          ‚îÇ
‚îÇ       .whereField("userId", isEqualTo: userId)  ‚Üê —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è        ‚îÇ
‚îÇ       .addSnapshotListener { snapshot, error in ... }                ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   Firestore Collection: "Orders"                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Document 1                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ userId: "user1"  ‚úì                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ date: Timestamp                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ products: {"iPhone": 2, "AirPods": 1}                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ total: 1299.99                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ   ‚îÇ  Document 2                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ userId: "user2"  ‚úó (–Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è)                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ ...                                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ   ‚îÇ  Document 3                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ userId: "user1"  ‚úì                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ date: Timestamp                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ‚îÄ products: {"MacBook": 1}                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ total: 1999.00                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ   addSnapshotListener ‚Äî real-time updates                            ‚îÇ
‚îÇ   (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑, UI –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)          ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### OrderCell

```swift
// Modules/OrderHistory/Cells/OrderCell.swift
import UIKit

final class OrderCell: UITableViewCell {

    static let identifier = "OrderCell"

    private lazy var orderDateLabel: UILabel = {
        let label = UILabel()
        label.numberOfLines = 0
        label.textColor = .label
        label.font = .boldSystemFont(ofSize: 18)
        return label
    }()

    private lazy var productsLabel: UILabel = {
        let label = UILabel()
        label.numberOfLines = 0
        label.textColor = .label
        label.font = .systemFont(ofSize: 18)
        return label
    }()

    private lazy var totalPriceLabel: UILabel = {
        let label = UILabel()
        label.numberOfLines = 0
        label.textColor = .label
        label.font = .boldSystemFont(ofSize: 18)
        return label
    }()

    private lazy var vStackView: VerticalStackView = {
        let stackView = VerticalStackView(
            arrangedSubviews: [orderDateLabel, productsLabel, totalPriceLabel],
            spacing: 16
        )
        stackView.alignment = .center
        return stackView
    }()

    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        setupConstraints()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setupConstraints() {
        addSubview(vStackView)

        vStackView.snp.makeConstraints { make in
            make.edges.equalToSuperview().inset(16)
        }
    }

    func showModel(order: OrderModel) {
        let timestamp: TimeInterval = TimeInterval(order.date.seconds)
        let date = Date(timeIntervalSince1970: timestamp)

        let dateFormatter = DateFormatter()
        dateFormatter.dateFormat = "MMM d, yyyy 'at' h:mm:ss a"

        let dateString = dateFormatter.string(from: date)

        orderDateLabel.text = dateString
        let formattedPrice = String(format: "%.2f", order.total)
        totalPriceLabel.text = "TOTAL: $" + formattedPrice

        var productsText = ""
        for (key, value) in order.products {
            productsText += "üõçÔ∏è" + key + " ‚éØ \(value)" + "\n"
        }
        productsLabel.text = productsText
    }
}
```

**–í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —è—á–µ–π–∫–∏ –∑–∞–∫–∞–∑–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      OrderCell (dynamic height)                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                                                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   Mar 14, 2023 at 3:26:10 PM                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   (orderDateLabel - bold 18)                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   spacing: 16pt                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   üõçÔ∏è iPhone 14 Pro ‚éØ 2                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   üõçÔ∏è AirPods Pro ‚éØ 1                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   üõçÔ∏è MacBook Air ‚éØ 1                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   (productsLabel - regular 18)                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   spacing: 16pt                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   TOTAL: $3499.97                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                   (totalPriceLabel - bold 18)                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                                ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  VStackView (alignment: .center, spacing: 16, inset: 16)            ‚îÇ
‚îÇ  rowHeight = UITableView.automaticDimension                         ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 20.8 –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ECommerce App Architecture                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                        UITabBarController                           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   Home   ‚îÇ  Search  ‚îÇ  Basket  ‚îÇFavorites ‚îÇ  Profile ‚îÇ          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   üè†     ‚îÇ   üîç     ‚îÇ   üõí     ‚îÇ    ‚ù§Ô∏è    ‚îÇ    üë§    ‚îÇ          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ                   ‚îÇ
‚îÇ          ‚Üì          ‚Üì          ‚Üì          ‚Üì          ‚Üì                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Home    ‚îÇ ‚îÇ  Search   ‚îÇ ‚îÇ  Basket   ‚îÇ ‚îÇ Favorites ‚îÇ ‚îÇ  Profile  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   VIPER   ‚îÇ ‚îÇ   VIPER   ‚îÇ ‚îÇ   VIPER   ‚îÇ ‚îÇ   VIPER   ‚îÇ ‚îÇ   VIPER   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ        ‚îÇ             ‚îÇ             ‚îÇ             ‚îÇ             ‚îÇ         ‚îÇ
‚îÇ        ‚Üì             ‚Üì             ‚Üì             ‚Üì             ‚Üì         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Product   ‚îÇ       ‚îÇ       ‚îÇ Complete  ‚îÇ       ‚îÇ       ‚îÇ Addresses ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Detail    ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ Order     ‚îÇ       ‚îÇ       ‚îÇ   VIPER   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   VIPER   ‚îÇ               ‚îÇ   VIPER   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îÇ Payment   ‚îÇ  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îÇ Info      ‚îÇ  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îÇ   VIPER   ‚îÇ  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îÇ Order     ‚îÇ  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îÇ History   ‚îÇ  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îÇ   MVC     ‚îÇ  ‚îÇ
‚îÇ                                                  ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                  ‚îÇ                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                          Shared Services                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ AuthManager  ‚îÇ  ‚îÇ UserInfo     ‚îÇ  ‚îÇ RealmManager ‚îÇ  ‚îÇ BasketManager‚îÇ ‚îÇ
‚îÇ  ‚îÇ (Firebase)   ‚îÇ  ‚îÇ Manager      ‚îÇ  ‚îÇ (Local DB)   ‚îÇ  ‚îÇ (Firestore)  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 20.9 –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ECommerce/
‚îú‚îÄ‚îÄ Application/
‚îÇ   ‚îú‚îÄ‚îÄ AppDelegate.swift
‚îÇ   ‚îú‚îÄ‚îÄ SceneDelegate.swift
‚îÇ   ‚îî‚îÄ‚îÄ Info.plist
‚îÇ
‚îú‚îÄ‚îÄ Core/
‚îÇ   ‚îú‚îÄ‚îÄ Extensions/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UIView+Extensions.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UIViewController+Extensions.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Notification+Extensions.swift
‚îÇ   ‚îú‚îÄ‚îÄ Helpers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VerticalStackView.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaddingLabel.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UIScreenBounds.swift
‚îÇ   ‚îî‚îÄ‚îÄ Protocols/
‚îÇ       ‚îî‚îÄ‚îÄ RootWindowManagerProtocol.swift
‚îÇ
‚îú‚îÄ‚îÄ Entities/
‚îÇ   ‚îú‚îÄ‚îÄ Enums/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileRowItem.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FirebaseError.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GeneralError.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NetworkError.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RealmError.swift
‚îÇ   ‚îî‚îÄ‚îÄ Models/
‚îÇ       ‚îú‚îÄ‚îÄ CurrentUserModel.swift
‚îÇ       ‚îú‚îÄ‚îÄ ProfileRowItemModel.swift
‚îÇ       ‚îú‚îÄ‚îÄ ResponseModels/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ProductModel.swift
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Categories.swift
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ CountryModel.swift
‚îÇ       ‚îî‚îÄ‚îÄ StorageModels/
‚îÇ           ‚îú‚îÄ‚îÄ AddressModel.swift
‚îÇ           ‚îú‚îÄ‚îÄ CardModel.swift
‚îÇ           ‚îú‚îÄ‚îÄ BasketModel.swift
‚îÇ           ‚îî‚îÄ‚îÄ FavoriteProductModel.swift
‚îÇ
‚îú‚îÄ‚îÄ Managers/
‚îÇ   ‚îú‚îÄ‚îÄ AuthManager/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthManager.swift
‚îÇ   ‚îú‚îÄ‚îÄ UserInfoManager/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserInfoManager.swift
‚îÇ   ‚îú‚îÄ‚îÄ RealmManager/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RealmManager.swift
‚îÇ   ‚îú‚îÄ‚îÄ BasketManager/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BasketManager.swift
‚îÇ   ‚îî‚îÄ‚îÄ RootWindowManager/
‚îÇ       ‚îî‚îÄ‚îÄ RootWindowManager.swift
‚îÇ
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ ProductsService.swift
‚îÇ   ‚îú‚îÄ‚îÄ CategoriesService.swift
‚îÇ   ‚îî‚îÄ‚îÄ CountriesService.swift
‚îÇ
‚îú‚îÄ‚îÄ Modules/
‚îÇ   ‚îú‚îÄ‚îÄ Onboarding/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ Login/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ SignUp/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ Home/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ ProductDetail/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ Basket/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ CompleteOrder/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ Favorites/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (VIPER)
‚îÇ   ‚îú‚îÄ‚îÄ Profile/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Base/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileRouter.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileInteractor.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfilePresenter.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProfileViewController.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UIComponents/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Cells/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ProfileCell.swift
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CustomViews/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ UserInfoView.swift
‚îÇ   ‚îú‚îÄ‚îÄ Addresses/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Base/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddressesRouter.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddressesInteractor.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddressesPresenter.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AddressesViewController.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddAddress/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddAddressViewController.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AddAddressView.xib
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UIComponents/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Cells/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ AddressCell.swift
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CustomViews/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ EmptyAddressesView.swift
‚îÇ   ‚îú‚îÄ‚îÄ PaymentInfo/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Base/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentInfoRouter.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentInfoInteractor.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentInfoPresenter.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PaymentInfoViewController.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddCard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddCardViewController.swift
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AddCardView.xib
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UIComponents/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Cells/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ CardCell.swift
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CustomViews/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ EmptyCardView.swift
‚îÇ   ‚îî‚îÄ‚îÄ OrderHistory/
‚îÇ       ‚îú‚îÄ‚îÄ Controller/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ OrderHistoryViewController.swift
‚îÇ       ‚îî‚îÄ‚îÄ Cells/
‚îÇ           ‚îî‚îÄ‚îÄ OrderCell.swift
‚îÇ
‚îî‚îÄ‚îÄ Resources/
    ‚îú‚îÄ‚îÄ Assets.xcassets
    ‚îú‚îÄ‚îÄ LaunchScreen.storyboard
    ‚îî‚îÄ‚îÄ GoogleService-Info.plist
```

---

## 20.10 –ò—Ç–æ–≥–∏ –≥–ª–∞–≤—ã

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã —Å–æ–∑–¥–∞–ª–∏:

| –ú–æ–¥—É–ª—å | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | –•—Ä–∞–Ω–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-------------|----------|----------|
| Profile | VIPER | Firebase Auth | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ |
| Addresses | VIPER | Realm | –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ |
| PaymentInfo | VIPER | Realm | –ü–ª–∞—Ç—ë–∂–Ω—ã–µ –∫–∞—Ä—Ç—ã |
| OrderHistory | MVC | Firestore | –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ |

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

1. **NotificationCenter** ‚Äî –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
2. **Delegate Pattern** ‚Äî –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ —è—á–µ–π–∫–∞—Ö
3. **UIPickerView as inputView** ‚Äî –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω—ã
4. **Firestore SnapshotListener** ‚Äî –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
5. **Realm filtering** ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ userId

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–∏–≥–∏

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç –æ—Å–Ω–æ–≤ Swift –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ iOS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞.

### –ß—Ç–æ –≤—ã –∏–∑—É—á–∏–ª–∏:

**Swift (–ì–ª–∞–≤—ã 1-10)**
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
- –£—Å–ª–æ–≤–∏—è, —Ü–∏–∫–ª—ã, –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- –§—É–Ω–∫—Ü–∏–∏ –∏ –∑–∞–º—ã–∫–∞–Ω–∏—è
- –û–û–ü: –∫–ª–∞—Å—Å—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è
- –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –û–ø—Ü–∏–æ–Ω–∞–ª—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é (ARC)
- –î–∂–µ–Ω–µ—Ä–∏–∫–∏
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

**UIKit (–ì–ª–∞–≤—ã 11-12)**
- –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤ UIKit
- UIView, UIViewController
- TableView, CollectionView
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ TabBar
- Auto Layout –∏ SnapKit
- –ê–Ω–∏–º–∞—Ü–∏–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ì–ª–∞–≤–∞ 13)**
- –ü–∞—Ç—Ç–µ—Ä–Ω VIPER
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –º–æ–¥—É–ª–∏

**–ü—Ä–∞–∫—Ç–∏–∫–∞ (–ì–ª–∞–≤—ã 14-20)**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- Firebase Authentication
- –†–∞–±–æ—Ç–∞ —Å API (Fake Store API)
- Realm Database
- Firestore –¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ VIPER-–º–æ–¥—É–ª–∏

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Technology Stack                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  Language:     Swift 5.9                                         ‚îÇ
‚îÇ  UI:           UIKit (programmatic)                              ‚îÇ
‚îÇ  Architecture: VIPER                                             ‚îÇ
‚îÇ  Layout:       SnapKit (Auto Layout wrapper)                     ‚îÇ
‚îÇ  Images:       SDWebImage (async loading + caching)              ‚îÇ
‚îÇ  Auth:         Firebase Authentication                           ‚îÇ
‚îÇ  Cloud DB:     Firebase Firestore                                ‚îÇ
‚îÇ  Local DB:     Realm                                             ‚îÇ
‚îÇ  API:          URLSession + Codable                              ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **SwiftUI** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π UI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
2. **Combine** ‚Äî —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **Core Data** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Realm –æ—Ç Apple
4. **Unit Testing** ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
5. **CI/CD** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è

### –†–µ—Å—É—Ä—Å—ã –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è:

- [Swift Documentation](https://swift.org/documentation/)
- [Apple Developer](https://developer.apple.com)
- [Hacking with Swift](https://www.hackingwithswift.com)
- [Ray Wenderlich](https://www.raywenderlich.com)

---

**–£–¥–∞—á–∏ –≤ iOS-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!**
